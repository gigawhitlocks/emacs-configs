<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Have I Ever Mentioned How Much I Love Emacs?</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/static/css/main.css" />
<link rel="stylesheet" type="text/css" href="styles.css" />
</head>
<body>
<div id="content" class="content">
<h1 class="title">Have I Ever Mentioned How Much I Love Emacs?</h1>
<div id="outline-container-Ian%27s%20Emacs%20Config" class="outline-2">
<h2 id="Ian%27s%20Emacs%20Config">Ian's Emacs Config</h2>
<div class="outline-text-2" id="text-Ian%27s%20Emacs%20Config">
<p>
This is my Emacs configuration.
If you read this file, you may find things you can copy-paste into your Emacs config.
</p>

<p>
Here is a screenshot of my environment:
</p>

<div id="org6387143" class="figure">
<p><img src="Ian's_Emacs_Config/2022-06-16_22-33-48_emacs-themeswitch-demo-nativecomp.gif" alt="2022-06-16_22-33-48_emacs-themeswitch-demo-nativecomp.gif" />
</p>
</div>

<p>
Some of the other screenshots throughout may not look exactly like this. That is because they are old screenshots.
</p>
</div>
</div>
<div id="outline-container-Entrypoint" class="outline-2">
<h2 id="Entrypoint">Entrypoint</h2>
<div class="outline-text-2" id="text-Entrypoint">
<p>
First I need to configure Emacs to load this file (<code>ian.org</code>) as its first action when it starts up. By default, Emacs runs <code>init.el</code> at the beginning of execution. The following piece of code <a href="https://orgmode.org/manual/Extracting-source-code.html">tangles</a> to <code>init.el</code>, and <code>init.el</code> containing the following must be checked in, because this snippet tangles <i>this</i> file (<code>ian.org</code>), so <b><b>it is this piece of code that starts the whole process of loading all of this configuration</b></b>.
</p>

<p>
Since I want most of the configuration here in <code>ian.org</code>, <code>init.el</code> just holds the bare minimum code so that the bulk of the configuration can be checked in once, inside this file, rather than twice like the contents of <code>init.el</code>. I'm using an <a href="https://orgmode.org/worg/org-contrib/babel/intro.html#literate-emacs-init">example from orgmode.org</a> to load the Org files and tangle them, then <code>require</code> the output of this file from the call to tangle, run <code>main</code>, and I'm done.
</p>

<p>
<b><b>NOTE</b></b> The filename <code>ian.org</code> is hardcoded in this entrypoint routine in the place of the main configuration file. This is because, despite the public nature of my config, it is not intended to be used in whole by anyone but me. This allows me certain shortcuts, like hostname-specific configuration, and convention-over-configuration in ways I find intuitive without overly detailed documentation. It is <span class="underline">my</span> config, after all, so my main config file is <code>ian.org</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;;; </span><span style="color: #41505E;">init --- the Emacs entrypoint</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">Commentary:</span>
<span style="color: #41505E;">;;;</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">Just load my customizations and execute -- org-mode bootstrap from</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">https://orgmode.org/worg/org-contrib/babel/intro.html#literate-emacs-init</span>
<span style="color: #41505E;">;;;</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">Code:</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">Load up Org Mode and (now included) Org Babel for elisp embedded in Org Mode files</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> dotfiles-dir <span style="color: #E27E8D;">(</span>file-name-directory <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">or</span> <span style="color: #B62D65;">(</span>buffer-file-name<span style="color: #B62D65;">)</span> load-file-name<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">let*</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>org-dir <span style="color: #B62D65;">(</span>expand-file-name
                 <span style="color: #539AFC;">"lisp"</span> <span style="color: #33CED8;">(</span>expand-file-name
                         <span style="color: #539AFC;">"org"</span> <span style="color: #5EC4FF;">(</span>expand-file-name
                                <span style="color: #539AFC;">"src"</span> dotfiles-dir<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
       <span style="color: #8BD49C;">(</span>org-contrib-dir <span style="color: #B62D65;">(</span>expand-file-name
                         <span style="color: #539AFC;">"lisp"</span> <span style="color: #33CED8;">(</span>expand-file-name
                                 <span style="color: #539AFC;">"contrib"</span> <span style="color: #5EC4FF;">(</span>expand-file-name
                                            <span style="color: #539AFC;">".."</span> org-dir<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
       <span style="color: #8BD49C;">(</span>load-path <span style="color: #B62D65;">(</span>append <span style="color: #33CED8;">(</span>list org-dir org-contrib-dir<span style="color: #33CED8;">)</span>
                          <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">or</span> load-path nil<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">load up Org-mode and Org-babel</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">org-install</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">ob-tangle</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">load up all literate org-mode files in this directory</span>
<span style="color: #5EC4FF;">(</span>mapc #'org-babel-load-file <span style="color: #E27E8D;">(</span>directory-files dotfiles-dir t <span style="color: #539AFC;">"\\.org$"</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">~/.emacs.d/ian.el</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">Load automatic and interactive customizations from this computer</span>
<span style="color: #5EC4FF;">(</span>shell-command <span style="color: #539AFC;">"touch ~/.emacs.d/.emacs-custom.el"</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> custom-file <span style="color: #539AFC;">"~/.emacs.d/.emacs-custom.el"</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>load custom-file<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">provide</span> '<span style="color: #E27E8D;">init</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
The rest of the code that is executed begins with the routines defined by this file.
</p>
</div>
</div>

<div id="outline-container-Package%20Manager%20Bootstrap" class="outline-2">
<h2 id="Package%20Manager%20Bootstrap">Package Manager Bootstrap</h2>
<div class="outline-text-2" id="text-Package%20Manager%20Bootstrap">
<p>
The first thing that must be done is to prepare to manage third party packages, because my config is built on top of the work of many third party packages. I like to install and manage all of the packages I use as part of my configuration so that it can be duplicated across computers (more or less) and managed with <code>git</code>, so I use <code>use-package</code> to ensure that packages are installed from my configuration file.
</p>

<p>
Bootstrap sets up the ELPA, Melpa, and Org Mode repositories, sets up the package manager, installs <a href="https://github.com/jwiegley/use-package"><code>use-package</code></a> if it is not found, configures <code>use-package</code> and installs a few extra packages that acoutrement <code>use-package</code> and will be used heavily throughout.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;;; </span><span style="color: #41505E;">ian.el --- my custom emacs config with no one else considered because fuck you</span>
<span style="color: #41505E;">;;;            </span><span style="color: #41505E;">naw but really I just don't have the time for that</span>
<span style="color: #41505E;">;;;</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">Commentary:</span>
<span style="color: #41505E;">;;;</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">After throwing away an old Emacs config, built when I had no idea what I was doing</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">and abandoning the "wisdom of the crowds"-configured Spacemacs for better control</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">here we are for better or worse</span>
<span style="color: #41505E;">;;;</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">Code:</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">package</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> package-archives '<span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"gnu"</span> . <span style="color: #539AFC;">"https://elpa.gnu.org/packages/"</span><span style="color: #8BD49C;">)</span>
                         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"melpa"</span> . <span style="color: #539AFC;">"https://melpa.org/packages/"</span><span style="color: #8BD49C;">)</span>
                         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"org"</span> . <span style="color: #539AFC;">"http://orgmode.org/elpa/"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>package-initialize<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">Now install use-package to enable us to use it</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">to manage the rest of our packages</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">unless</span> <span style="color: #E27E8D;">(</span>package-installed-p 'use-package<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">progn</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">unless</span> package-archive-contents
      <span style="color: #B62D65;">(</span>package-refresh-contents<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>package-install 'use-package<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">set ensure to be the default</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">use-package-ensure</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> use-package-always-ensure t<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">these go in bootstrap because packages installed</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">with use-package use :diminish and :delight</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">diminish</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">delight</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Once this is done I need to install and configure any third party packages that are used in many modes throughout Emacs. Some of these modes fundamentally change the Emacs experience and need to be present before everything can be configured.
</p>
</div>
</div>

<div id="outline-container-Fundamental%20Package%20Installation%20and%20Configuration" class="outline-2">
<h2 id="Fundamental%20Package%20Installation%20and%20Configuration">Fundamental Package Installation and Configuration</h2>
<div class="outline-text-2" id="text-Fundamental%20Package%20Installation%20and%20Configuration">
<p>
First I need to install packages with a large effect and on which other packages are likely to depend. These are packages essential to my workflow. Configuration here should be config that must run early, before variables are set or language-related packages, which will likely rely on these being set.
</p>
</div>
<div id="outline-container-Icons" class="outline-3">
<h3 id="Icons">Icons</h3>
<div class="outline-text-3" id="text-Icons">
<p>
Treemacs and Doom themes both rely upon <code>all-the-icons</code> to look nice
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">all-the-icons</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Treemacs" class="outline-3">
<h3 id="Treemacs">Treemacs</h3>
<div class="outline-text-3" id="text-Treemacs">
<p>
Treemacs provides a file browser on the left hand side of Emacs that I have grown to really like. It's great for exploring unfamiliar projects and modules.
</p>

<p>
It's installed early because many things have integrations with it, including some themes.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">treemacs</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">treemacs-all-the-icons</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Theme" class="outline-3">
<h3 id="Theme">Theme</h3>
<div class="outline-text-3" id="text-Theme">
<p>
I'm using the Doom Emacs theme pack.
I think they're really nice to look at, especially with <code>solaire-mode</code>.
</p>

<p>
First install the theme pack:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">doom-themes</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">Global settings (defaults)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> doom-themes-enable-bold t    <span style="color: #41505E;">; </span><span style="color: #41505E;">if nil, bold is universally disabled</span>
        doom-themes-enable-italic t
        doom-themes-treemacs-theme <span style="color: #539AFC;">"doom-colors"</span>
        <span style="color: #E27E8D;">)</span> <span style="color: #41505E;">; </span><span style="color: #41505E;">if nil, italics is universally disabled</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">Corrects (and improves) org-mode's native fontification.</span>
  <span style="color: #E27E8D;">(</span>doom-themes-org-config<span style="color: #E27E8D;">)</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">Configures Treemacs to play nicely with Doom themes</span>
  <span style="color: #E27E8D;">(</span>doom-themes-treemacs-config<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Apply a small fix where doom-colors Treemacs theme is missing a few icons
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>treemacs-define-custom-icon
 <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">treemacs-get-icon-value</span> <span style="color: #539AFC;">"sh"</span><span style="color: #E27E8D;">)</span> <span style="color: #539AFC;">"bash"</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>treemacs-define-custom-icon
 <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">treemacs-get-icon-value</span> <span style="color: #539AFC;">"cache"</span><span style="color: #E27E8D;">)</span> <span style="color: #539AFC;">"sqlite"</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
<p>
I have separated the Doom themes into light and dark, so I can have a randomly chosen light theme in the late morning and early afternoon, and switch back to a dark theme at other times.
</p>

<p>
I'll curate the lists as I use the new functionality, to remove ones I
don't like.
</p>
</div>
<div id="outline-container-Light%20themes" class="outline-4">
<h4 id="Light%20themes">Light themes</h4>
<div class="outline-text-4" id="text-Light%20themes">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defvar</span> <span style="color: #718CA1;">light-theme-list</span> '<span style="color: #E27E8D;">(</span>doom-one-light
                           doom-acario-light
                           doom-city-lights
                           doom-fairy-floss
                           doom-flatwhite
                           doom-gruvbox-light
                           doom-horizon
                           doom-laserwave
                           doom-miramare
                           doom-monokai-classic
                           doom-monokai-pro<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Dark%20themes" class="outline-4">
<h4 id="Dark%20themes">Dark themes</h4>
<div class="outline-text-4" id="text-Dark%20themes">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defvar</span> <span style="color: #718CA1;">dark-theme-list</span> '<span style="color: #E27E8D;">(</span>doom-one-dark
                          doom-one-vibrant
                          doom-city-lights
                          doom-challenger-deep
                          doom-dark+
                          doom-dracula
                          doom-ephemeral
                          doom-fairy-floss
                          doom-gruvbox
                          doom-henna
                          doom-horizon
                          doom-Iosvkem
                          doom-laserwave
                          doom-material
                          doom-miramare
                          doom-molokai
                          doom-monokai-classic
                          doom-monokai-pro
                          doom-moonlight
                          doom-nord
                          doom-nova
                          doom-oceanic-next
                          doom-old-hope
                          doom-opera
                          doom-outrun-electric
                          doom-palenight
                          doom-plain
                          doom-peacock
                          doom-rouge
                          doom-snazzy
                          doom-solarized-dark
                          doom-spacegrey
                          doom-tomorrow-night
                          doom-zenburn
                          doom-mono-dark<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Noninteractive%20theme%20picker" class="outline-4">
<h4 id="Noninteractive%20theme%20picker">Noninteractive theme picker</h4>
<div class="outline-text-4" id="text-Noninteractive%20theme%20picker">
<p>
For running at startup
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">set-theme-at-specific-times</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Set light theme at 10AM, dark theme at 3PM"</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>now <span style="color: #33CED8;">(</span>decode-time<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
        <span style="color: #B62D65;">(</span>light-theme <span style="color: #33CED8;">(</span>nth <span style="color: #5EC4FF;">(</span>random <span style="color: #E27E8D;">(</span>length light-theme-list<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span> light-theme-list<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
        <span style="color: #B62D65;">(</span>dark-theme <span style="color: #33CED8;">(</span>nth <span style="color: #5EC4FF;">(</span>random <span style="color: #E27E8D;">(</span>length dark-theme-list<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span> dark-theme-list<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">if</span> <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">and</span> <span style="color: #33CED8;">(</span>&gt;= <span style="color: #5EC4FF;">(</span>nth 2 now<span style="color: #5EC4FF;">)</span> 10<span style="color: #33CED8;">)</span> <span style="color: #33CED8;">(</span>&lt; <span style="color: #5EC4FF;">(</span>nth 2 now<span style="color: #5EC4FF;">)</span> 15<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
        <span style="color: #B62D65;">(</span>load-theme light-theme t<span style="color: #B62D65;">)</span>
      <span style="color: #B62D65;">(</span>load-theme dark-theme t<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>add-hook 'after-init-hook 'set-theme-at-specific-times<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Interactive%20theme%20picker" class="outline-4">
<h4 id="Interactive%20theme%20picker">Interactive theme picker</h4>
<div class="outline-text-4" id="text-Interactive%20theme%20picker">
<p>
Spawns Helm and allows you to pick, but from the appropriate list for the time of day.
First the underlying implementation:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">choose-theme-impl</span> <span style="color: #E27E8D;">(</span>light-theme-list dark-theme-list<span style="color: #E27E8D;">)</span>
  <span style="color: #707b86;">"Choose a theme from the appropriate list based on the current time"</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">let*</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>now <span style="color: #33CED8;">(</span>decode-time<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
         <span style="color: #B62D65;">(</span>themes <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">if</span> <span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">and</span> <span style="color: #E27E8D;">(</span>&gt;= <span style="color: #8BD49C;">(</span>nth 2 now<span style="color: #8BD49C;">)</span> 10<span style="color: #E27E8D;">)</span> <span style="color: #E27E8D;">(</span>&lt; <span style="color: #8BD49C;">(</span>nth 2 now<span style="color: #8BD49C;">)</span> 15<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
                     light-theme-list
                   dark-theme-list<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
         <span style="color: #B62D65;">(</span>theme-names <span style="color: #33CED8;">(</span>mapcar 'symbol-name themes<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
         <span style="color: #B62D65;">(</span>theme-name <span style="color: #33CED8;">(</span>helm <span style="color: #5EC4FF;">:sources</span> <span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">helm-build-sync-source</span> <span style="color: #539AFC;">"Themes"</span>
                                      <span style="color: #5EC4FF;">:candidates</span> theme-names<span style="color: #5EC4FF;">)</span>
                           <span style="color: #5EC4FF;">:buffer</span> <span style="color: #539AFC;">"*helm choose-theme*"</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>intern theme-name<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
<p>
Entrypoint
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">choose-theme</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Choose a theme interactively using Helm"</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>theme <span style="color: #33CED8;">(</span>choose-theme-impl light-theme-list dark-theme-list<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>load-theme theme t<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-Solaire%20Mode" class="outline-3">
<h3 id="Solaire%20Mode">Solaire Mode</h3>
<div class="outline-text-3" id="text-Solaire%20Mode">
<p>
Also some visual candy that makes "real" buffers more visible by changing the background color slightly vs e.g. <b>compilation</b> or magit buffers
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">solaire-mode</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>solaire-global-mode +1<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Doom%20Modeline" class="outline-3">
<h3 id="Doom%20Modeline">Doom Modeline</h3>
<div class="outline-text-3" id="text-Doom%20Modeline">
<p>
The Doom Emacs project also provides a fancy modeline to go along with their themes.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">doom-modeline</span>
  <span style="color: #5EC4FF;">:config</span>       <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">doom-modeline-def-modeline</span> <span style="color: #E27E8D;">'main</span>
                  '<span style="color: #8BD49C;">(</span>bar matches buffer-info remote-host buffer-position parrot selection-info<span style="color: #8BD49C;">)</span>
                  '<span style="color: #8BD49C;">(</span>misc-info minor-modes checker input-method buffer-encoding major-mode process vcs <span style="color: #539AFC;">"  "</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">:hook</span> <span style="color: #E27E8D;">(</span>after-init . doom-modeline-mode<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Emoji%20%F0%9F%99%8F" class="outline-3">
<h3 id="Emoji%20%F0%9F%99%8F">Emoji üôè</h3>
<div class="outline-text-3" id="text-Emoji%20%F0%9F%99%8F">
<p>
Provided by <a href="https://github.com/iqbalansari/emacs-emojify">emojify</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">&#128588; Emoji! &#128588;</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">emojify</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> emojify-download-emojis-p t<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>emojify-set-emoji-styles '<span style="color: #8BD49C;">(</span>unicode<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>add-hook 'after-init-hook #'global-emojify-mode<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Configure%20Recent%20File%20Tracking" class="outline-3">
<h3 id="Configure%20Recent%20File%20Tracking">Configure Recent File Tracking</h3>
<div class="outline-text-3" id="text-Configure%20Recent%20File%20Tracking">
<p>
Emacs comes with <code>recentf-mode</code> which helps me remember what I was doing after I restart my session.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">recent files mode</span>
<span style="color: #5EC4FF;">(</span>recentf-mode 1<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> recentf-max-menu-items 25<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> recentf-max-saved-items 25<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">ignore the elpa directory</span>
<span style="color: #5EC4FF;">(</span>add-to-list 'recentf-exclude
             <span style="color: #539AFC;">"elpa/*"</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Install%20and%20Configure%20Projectile" class="outline-3">
<h3 id="Install%20and%20Configure%20Projectile">Install and Configure Projectile</h3>
<div class="outline-text-3" id="text-Install%20and%20Configure%20Projectile">
<p>
<a href="https://projectile.readthedocs.io/en/latest/"><code>projectile</code></a> is a fantastic package that provides all kinds of project context-aware functions for things like:
</p>
<ul class="org-ul">
<li>running grep, but only inside the project</li>
<li>compiling the project from the project root without doing anything</li>
<li>find files within the project, again without having to do anything extra</li>
</ul>
<p>
It's great, it gets installed early, can't live without it. üíò <code>projectile</code>
</p>


<div id="orgdb0a0d3" class="figure">
<p><img src="My_Environment/2020-05-18_21-21-10_Peek%25202020-05-18%252021-19.gif" alt="2020-05-18_21-21-10_Peek%25202020-05-18%252021-19.gif" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">projectile</span>
  <span style="color: #5EC4FF;">:delight</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">helm-projectile</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">treemacs-projectile</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>projectile-mode +1<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="I%27ve%20read%20about%20something%20called%20project.el"></a><span class="todo TODO">TODO</span> I've read about something called project.el<br />
<div class="outline-text-5" id="text-I%27ve%20read%20about%20something%20called%20project.el">
<p>
The impression that I got was that <code>project.el</code> is a first-party replacement for Projectile in newer versions of Emacs. I don't know if this is true or not. I should investigate <code>project.el</code>.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-Install%20and%20Configure%20Evil%20Mode" class="outline-3">
<h3 id="Install%20and%20Configure%20Evil%20Mode">Install and Configure Evil Mode</h3>
<div class="outline-text-3" id="text-Install%20and%20Configure%20Evil%20Mode">
<p>
<a href="https://github.com/emacs-evil/evil"><code>evil-mode</code></a> fundamentally changes Emacs so that while editing all of the modes and keybindings from <code>vim</code> are present.
It's controversial but I think modal editing is brilliant and have been using <code>vim</code> bindings since the mid-aughts. No going back.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">setup-evil</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Install and configure evil-mode and related bindings."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">evil</span>
    <span style="color: #5EC4FF;">:init</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">setq</span> evil-want-keybinding nil<span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">setq</span> evil-want-integration t<span style="color: #8BD49C;">)</span>
    <span style="color: #5EC4FF;">:config</span>
    <span style="color: #8BD49C;">(</span>evil-mode 1<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>

  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">evil-collection</span>
    <span style="color: #5EC4FF;">:after</span> evil
    <span style="color: #5EC4FF;">:config</span>
    <span style="color: #41505E;">;; </span><span style="color: #41505E;">don't let evil-collection manage go-mode</span>
    <span style="color: #41505E;">;; </span><span style="color: #41505E;">it is overriding gd</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">setq</span> evil-collection-mode-list <span style="color: #B62D65;">(</span>delq 'go-mode evil-collection-mode-list<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>evil-collection-init<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>


  <span style="color: #41505E;">;; </span><span style="color: #41505E;">the evil-collection overrides the worktree binding :(</span>
  <span style="color: #E27E8D;">(</span>general-define-key
   <span style="color: #5EC4FF;">:states</span> 'normal
   <span style="color: #5EC4FF;">:keymaps</span> 'magit-status-mode-map
   <span style="color: #539AFC;">"Z"</span> 'magit-worktree<span style="color: #E27E8D;">)</span>

  <span style="color: #41505E;">;; </span><span style="color: #41505E;">add fd as a remap for esc</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">evil-escape</span>
    <span style="color: #5EC4FF;">:delight</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>evil-escape-mode 1<span style="color: #E27E8D;">)</span>

  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">evil-surround</span>
    <span style="color: #5EC4FF;">:config</span>
    <span style="color: #8BD49C;">(</span>global-evil-surround-mode 1<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">undo-tree</span>
    <span style="color: #5EC4FF;">:config</span>
    <span style="color: #8BD49C;">(</span>global-undo-tree-mode<span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>evil-set-undo-system 'undo-tree<span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">setq</span> undo-tree-history-directory-alist '<span style="color: #B62D65;">(</span><span style="color: #33CED8;">(</span><span style="color: #539AFC;">"."</span> . <span style="color: #539AFC;">"~/.emacs.d/undo"</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>

  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">treemacs-evil</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq-default</span> evil-escape-key-sequence <span style="color: #539AFC;">"fd"</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Install%20and%20Configure%20Keybindings%20Helper" class="outline-3">
<h3 id="Install%20and%20Configure%20Keybindings%20Helper">Install and Configure Keybindings Helper</h3>
<div class="outline-text-3" id="text-Install%20and%20Configure%20Keybindings%20Helper">
<p>
<a href="https://github.com/noctuid/general.el">General</a> provides more consistent and convenient keybindings, especially with <code>evil-mode</code>.
</p>

<p>
It's mostly used below in the <a href="#Global%20Keybindings">global keybindings</a> section.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">general</span>
  <span style="color: #5EC4FF;">:init</span>
  <span style="color: #E27E8D;">(</span>setup-evil<span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #E27E8D;">(</span>general-evil-setup<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Install%20and%20Configure%20Helm%20for%20Command%20and%20Control" class="outline-3">
<h3 id="Install%20and%20Configure%20Helm%20for%20Command%20and%20Control">Install and Configure Helm for Command and Control</h3>
<div class="outline-text-3" id="text-Install%20and%20Configure%20Helm%20for%20Command%20and%20Control">
<p>
<a href="https://github.com/emacs-helm/helm">Helm</a> is a full-featured command and control package that fundamentally alters a number of core Emacs functions, including what appears when you press <code>M-x</code> (with the way I have it configured, anyway).
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">helm</span>
  <span style="color: #5EC4FF;">:delight</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">helm-descbinds</span>
    <span style="color: #5EC4FF;">:config</span>
    <span style="color: #8BD49C;">(</span>helm-descbinds-mode<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">helm-ag</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>global-set-key <span style="color: #8BD49C;">(</span>kbd <span style="color: #539AFC;">"M-x"</span><span style="color: #8BD49C;">)</span> #'helm-M-x<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>define-key helm-find-files-map <span style="color: #539AFC;">"\t"</span> 'helm-execute-persistent-action<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> helm-always-two-windows nil<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> helm-default-display-buffer-functions '<span style="color: #8BD49C;">(</span>display-buffer-in-side-window<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>helm-mode 1<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Install%20and%20Configure%20Magit" class="outline-3">
<h3 id="Install%20and%20Configure%20Magit">Install and Configure Magit</h3>
<div class="outline-text-3" id="text-Install%20and%20Configure%20Magit">
<p>
<a href="https://github.com/magit/magit">Magit</a> is an incredible integrated <code>git</code> UI for Emacs.
</p>

<div id="org0bedc6d" class="figure">
<p><img src="My_Environment/2020-05-18_21-26-19_Peek%25202020-05-18%252021-25.gif" alt="2020-05-18_21-26-19_Peek%25202020-05-18%252021-25.gif" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">magit</span><span style="color: #5EC4FF;">)</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">disable the default emacs vc because git is all I use,</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">for I am a simple man</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> vc-handled-backends nil<span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
The Magit author publishes an additional package called <a href="https://emacsair.me/2018/12/19/forge-0.1/">forge</a>. Forge lets you interact with GitHub and Gitlab from inside of Emacs. There's planned support for Gogs, Gitea, etc.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">forge</span>
  <span style="color: #5EC4FF;">:after</span> magit<span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Forge has to be configured with something like <code>.authinfo</code> or preferably <code>authinfo.gpg</code>. Create a access token through the web UI of GitHub and place on the first line in <code>$HOME/.authinfo</code> with the following format:
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #5EC4FF; font-weight: bold;">host</span> api.github.com login gigawhitlocks^forge password TOKEN
</pre>
</div>

<p>
but obviously replace <code>TOKEN</code> with the access token. And <a href="https://www.masteringemacs.org/article/keeping-secrets-in-emacs-gnupg-auth-sources">use <code>.authinfo.gpg</code> and encrypt it</a>. Don't just use <code>.authinfo</code>.
</p>

<p>
Also, I've only tried this with GitHub. But at least in the case of GitHub, once Forge is set up, it adds some niceties like this to the Magit overview. In this case, I'm looking at the history of a project and Forge automatically adds a link to the PR displayed as part of the commit title in history:
</p>


<div id="org2c23deb" class="figure">
<p><img src="My_Environment/2020-01-15_13-17-16_2020-01-14T13_58_07.gif" alt="2020-01-15_13-17-16_2020-01-14T13_58_07.gif" />
</p>
</div>
</div>
</div>

<div id="outline-container-Install%20and%20Configure%20~git-timemachine~" class="outline-3">
<h3 id="Install%20and%20Configure%20~git-timemachine~">Install and Configure <code>git-timemachine</code></h3>
<div class="outline-text-3" id="text-Install%20and%20Configure%20~git-timemachine~">
<p>
<code>git-timeline</code> lets you step through the history of a file.
</p>


<div id="org8ee903c" class="figure">
<p><img src="My_Environment/2020-01-11_23-23-47_2020-01-11T23:15:54.gif" alt="2020-01-11_23-23-47_2020-01-11T23:15:54.gif" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">git-timemachine</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">This lets git-timemachine's bindings take precedence over evils'</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">(got lucky and happened to find this while looking for the package name, ha!)</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">@see https://bitbucket.org/lyro/evil/issue/511/let-certain-minor-modes-key-bindings</span>
<span style="color: #5EC4FF;">(</span>eval-after-load 'git-timemachine
  '<span style="color: #E27E8D;">(</span>progn
     <span style="color: #8BD49C;">(</span>evil-make-overriding-map git-timemachine-mode-map 'normal<span style="color: #8BD49C;">)</span>
     <span style="color: #41505E;">;; </span><span style="color: #41505E;">force update evil keymaps after git-timemachine-mode loaded</span>
     <span style="color: #8BD49C;">(</span>add-hook 'git-timemachine-mode-hook #'evil-normalize-keymaps<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Install%20and%20Configure%20~which-key~" class="outline-3">
<h3 id="Install%20and%20Configure%20~which-key~">Install and Configure <code>which-key</code></h3>
<div class="outline-text-3" id="text-Install%20and%20Configure%20~which-key~">
<p>
It can be difficult to to remember and discover all of the available shortcuts in Emacs, so <a href="https://github.com/justbur/emacs-which-key"><code>which-key</code></a> pops up a special buffer to show you available shortcuts whenever you pause in the middle of a keyboard shortcut for more than a few seconds. It's really lovely.
</p>

<div id="org3824e36" class="figure">
<p><img src="My_Environment/2020-05-18_21-37-19_Peek%25202020-05-18%252021-37.gif" alt="2020-05-18_21-37-19_Peek%25202020-05-18%252021-37.gif" />
</p>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">which-key</span>
  <span style="color: #5EC4FF;">:delight</span>
  <span style="color: #5EC4FF;">:init</span>
  <span style="color: #E27E8D;">(</span>which-key-mode<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>which-key-setup-minibuffer<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Colorize%20ANSI%20colors%20in%20~%2Acompilation%2A~" class="outline-3">
<h3 id="Colorize%20ANSI%20colors%20in%20~%2Acompilation%2A~">Colorize ANSI colors in <code>*compilation*</code></h3>
<div class="outline-text-3" id="text-Colorize%20ANSI%20colors%20in%20~%2Acompilation%2A~">
<p>
If you run a command through <code>M-x compile</code> by default Emacs prints ANSI codes literally, but a lot of tools use these for colors and this makes it so Emacs shows colors in the <code>*compilation*</code> buffer.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">ansi</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">enable ANSI escape codes in compilation buffer</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">ansi-color</span><span style="color: #E27E8D;">)</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">slightly modified from</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">https://endlessparentheses.com/ansi-colors-in-the-compilation-buffer-output.html</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">colorize-compilation</span> <span style="color: #8BD49C;">()</span>
    <span style="color: #707b86;">"Colorize from `</span><span style="color: #E27E8D;">compilation-filter-start</span><span style="color: #707b86;">' to `</span><span style="color: #E27E8D;">point</span><span style="color: #707b86;">'."</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #B62D65;">(</span><span style="color: #33CED8;">(</span>inhibit-read-only t<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
      <span style="color: #B62D65;">(</span>ansi-color-apply-on-region
       compilation-filter-start <span style="color: #33CED8;">(</span>point<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>

  <span style="color: #E27E8D;">(</span>add-hook 'compilation-filter-hook
            #'colorize-compilation<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>ansi<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Scream%20when%20compilation%20is%20finished" class="outline-3">
<h3 id="Scream%20when%20compilation%20is%20finished">Scream when compilation is finished</h3>
<div class="outline-text-3" id="text-Scream%20when%20compilation%20is%20finished">
<p>
Sometimes when the compile process takes more than a few seconds I change windows and get distracted. This hook plays a file through <code>aplay</code> (something else that will break on a non-Linux machine) to notify me that compilation is done. I was looking for something like a kitchen timer but I couldn't find one so right now the vendored sound is the <a href="https://en.wikipedia.org/wiki/Wilhelm_scream">Wilhelm Scream</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defvar</span> <span style="color: #718CA1;">isw-should-play-chime</span> nil<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> isw-should-play-chime nil<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">isw-play-chime</span> <span style="color: #E27E8D;">(</span>buffer msg<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">if</span> <span style="color: #8BD49C;">(</span>eq isw-should-play-chime t<span style="color: #8BD49C;">)</span>
      <span style="color: #8BD49C;">(</span>start-process-shell-command <span style="color: #539AFC;">"chime"</span> <span style="color: #539AFC;">"*Messages*"</span> <span style="color: #539AFC;">"aplay /home/ian/.emacs.d/vendor/chime.wav"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-to-list 'compilation-finish-functions 'isw-play-chime<span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
A function for toggling the screaming on and off. I love scream-when-finished but sometimes I'm listening to music or something and it gets a little ridiculous.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">toggle-screaming</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">if</span> <span style="color: #8BD49C;">(</span>eq isw-should-play-chime t<span style="color: #8BD49C;">)</span>
      <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">progn</span>
        <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">setq</span> isw-should-play-chime nil<span style="color: #B62D65;">)</span>
        <span style="color: #B62D65;">(</span>message <span style="color: #539AFC;">"Screaming disabled."</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">progn</span>
      <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">setq</span> isw-should-play-chime t<span style="color: #B62D65;">)</span>
      <span style="color: #B62D65;">(</span>message <span style="color: #539AFC;">"Screaming enabled."</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Configure%20the%20Startup%20Splashscreen" class="outline-3">
<h3 id="Configure%20the%20Startup%20Splashscreen">Configure the Startup Splashscreen</h3>
<div class="outline-text-3" id="text-Configure%20the%20Startup%20Splashscreen">
<p>
Following Spacemacs's style, I use the <a href="https://github.com/emacs-dashboard/emacs-dashboard"><code>emacs-dashboard</code></a> project and <a href="https://github.com/domtronn/all-the-icons.el"><code>all-the-icons</code></a> to provide an aesthetically pleasing splash screen with useful links to recently used files on launch.
</p>

<p>
Actually, looking at the project page, the icons don't seem to be working for me. Maybe I need to enable them. I'll investigate later.
</p>


<div id="orge857411" class="figure">
<p><img src="My_Environment/2020-05-18_21-31-13_Screenshot%2520from%25202020-05-18%252021-30-43.png" alt="2020-05-18_21-31-13_Screenshot%2520from%25202020-05-18%252021-30-43.png" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">first disable the default startup screen</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> inhibit-startup-screen t<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">dashboard</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #E27E8D;">(</span>dashboard-setup-startup-hook<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> dashboard-startup-banner 'logo<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> dashboard-center-content t<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> dashboard-items '<span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>recents  . 5<span style="color: #B62D65;">)</span>
                          <span style="color: #B62D65;">(</span>bookmarks . 5<span style="color: #B62D65;">)</span>
                          <span style="color: #B62D65;">(</span>projects . 5<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
        <span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> dashboard-set-footer nil<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Install%20templating%20tool%20and%20default%20snippets" class="outline-3">
<h3 id="Install%20templating%20tool%20and%20default%20snippets">Install templating tool and default snippets</h3>
<div class="outline-text-3" id="text-Install%20templating%20tool%20and%20default%20snippets">
<p>
YASnippet is really cool and allow fast insertion of boilerplate using templates. I've been meaning to use this more.
<a href="https://www.emacswiki.org/emacs/Yasnippet">Here are the YASnippet docs.</a>
</p>

<div id="orgf479bfe" class="figure">
<p><img src="My_Environment/2020-05-18_21-40-09_Peek%25202020-05-18%252021-39.gif" alt="2020-05-18_21-40-09_Peek%25202020-05-18%252021-39.gif" />
</p>
</div>

<p>
OK that example maybe isn't the best, but if you have <code>yas-insert-snippet</code> bound to something and you're inserting something more complex it's.. probably worthwhile. I should use it more. You can also write your own snippets. I should figure that out.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">yasnippet</span>
  <span style="color: #5EC4FF;">:delight</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">yasnippet-snippets</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Enable yas-mode everywhere
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>yas-global-mode 1<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Smooth%20scrolling%2C%20distraction-free%20mode%2C%20and%20minimap" class="outline-3">
<h3 id="Smooth%20scrolling%2C%20distraction-free%20mode%2C%20and%20minimap">Smooth scrolling, distraction-free mode, and minimap</h3>
</div>
</div>
<div id="outline-container-Extra%20Packages" class="outline-2">
<h2 id="Extra%20Packages">Extra Packages</h2>
<div class="outline-text-2" id="text-Extra%20Packages">
<p>
Packages with a smaller effect on the experience.
</p>
</div>
<div id="outline-container-prism%20colors%20by%20indent%20level" class="outline-3">
<h3 id="prism%20colors%20by%20indent%20level">prism colors by indent level</h3>
<div class="outline-text-3" id="text-prism%20colors%20by%20indent%20level">
<p>
It takes over the color theme and I don't know if I want it on all the time but it's interesting and I want to have it installed so that I can turn it on in certain situations, like editing highly nested YAML, where it might be invaluable.
If I can remember to use it :)
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">prism</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-git-gutter%20shows%20unstaged%20changes%20in%20the%20gutter" class="outline-3">
<h3 id="git-gutter%20shows%20unstaged%20changes%20in%20the%20gutter">git-gutter shows unstaged changes in the gutter</h3>
<div class="outline-text-3" id="text-git-gutter%20shows%20unstaged%20changes%20in%20the%20gutter">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">git-gutter</span>
    <span style="color: #5EC4FF;">:delight</span>
    <span style="color: #5EC4FF;">:config</span>
    <span style="color: #E27E8D;">(</span>global-git-gutter-mode +1<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Highlight%20the%20current%20line" class="outline-3">
<h3 id="Highlight%20the%20current%20line">Highlight the current line</h3>
<div class="outline-text-3" id="text-Highlight%20the%20current%20line">
<p>
I like to highlight the current line so that it is easy to identify where my cursor is.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>global-hl-line-mode<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> global-hl-line-sticky-flag t<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Rainbow%20delimiters%20make%20it%20easier%20to%20identify%20matching%20parentheses" class="outline-3">
<h3 id="Rainbow%20delimiters%20make%20it%20easier%20to%20identify%20matching%20parentheses">Rainbow delimiters make it easier to identify matching parentheses</h3>
<div class="outline-text-3" id="text-Rainbow%20delimiters%20make%20it%20easier%20to%20identify%20matching%20parentheses">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">rainbow-delimiters</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">set up rainbow delimiters for Emacs lisp</span>
  <span style="color: #E27E8D;">(</span>add-hook 'emacs-lisp-mode-hook #'rainbow-delimiters-mode<span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-restart-emacs%20does%20what%20it%20says%20on%20the%20tin" class="outline-3">
<h3 id="restart-emacs%20does%20what%20it%20says%20on%20the%20tin">restart-emacs does what it says on the tin</h3>
<div class="outline-text-3" id="text-restart-emacs%20does%20what%20it%20says%20on%20the%20tin">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">restart-emacs</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-s%20is%20a%20string%20manipulation%20utility" class="outline-3">
<h3 id="s%20is%20a%20string%20manipulation%20utility">s is a string manipulation utility</h3>
<div class="outline-text-3" id="text-s%20is%20a%20string%20manipulation%20utility">
<p>
I use this for a trim() function far down below. I think it gets pulled in as a dependency anyway, but in any case it provides a bunch of helper functions and stuff. <a href="https://github.com/magnars/s.el">Docs are here.</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">s</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-a%20systemd%20file%20mode" class="outline-3">
<h3 id="a%20systemd%20file%20mode">a systemd file mode</h3>
<div class="outline-text-3" id="text-a%20systemd%20file%20mode">
<p>
Just provides syntax highlighting in <code>.unit</code> files.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">systemd</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Install%20and%20Configure%20Company%20for%20Auto-Completion" class="outline-3">
<h3 id="Install%20and%20Configure%20Company%20for%20Auto-Completion">Install and Configure Company for Auto-Completion</h3>
<div class="outline-text-3" id="text-Install%20and%20Configure%20Company%20for%20Auto-Completion">
<p>
Great tab-complete and auto-complete with <a href="https://github.com/company-mode/company-mode">Company Mode</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">auto-completion</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">company</span>
  <span style="color: #5EC4FF;">:delight</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">enable it everywhere</span>
  <span style="color: #E27E8D;">(</span>add-hook 'after-init-hook 'global-company-mode<span style="color: #E27E8D;">)</span>

  <span style="color: #41505E;">;; </span><span style="color: #41505E;">tab complete!</span>
  <span style="color: #E27E8D;">(</span>global-set-key <span style="color: #539AFC;">"\t"</span> 'company-complete-common<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">icons</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">company-box</span>
  <span style="color: #5EC4FF;">:hook</span> <span style="color: #E27E8D;">(</span>company-mode . company-box-mode<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">extra documentation when idling</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">company-quickhelp</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>company-quickhelp-mode<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Install%20and%20Configure%20Flycheck%20for%20Linting" class="outline-3">
<h3 id="Install%20and%20Configure%20Flycheck%20for%20Linting">Install and Configure Flycheck for Linting</h3>
<div class="outline-text-3" id="text-Install%20and%20Configure%20Flycheck%20for%20Linting">
<p>
<a href="https://www.flycheck.org/en/latest/">Flycheck</a> is an on-the-fly checker that hooks into most language backends.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">linter</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">flycheck</span>
  <span style="color: #5EC4FF;">:delight</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">enable it everywhere</span>
  <span style="color: #5EC4FF;">:init</span> <span style="color: #E27E8D;">(</span>global-flycheck-mode<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>add-hook 'flycheck-error-list-mode-hook
          'visual-line-mode<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Install%20~exec-path-from-shell~%20to%20manage%20the%20PATH" class="outline-3">
<h3 id="Install%20~exec-path-from-shell~%20to%20manage%20the%20PATH">Install <code>exec-path-from-shell</code> to manage the PATH</h3>
<div class="outline-text-3" id="text-Install%20~exec-path-from-shell~%20to%20manage%20the%20PATH">
<p>
<a href="https://github.com/purcell/exec-path-from-shell">exec-path-from-shell</a> mirrors PATH in zsh or Bash in macOS or Linux into Emacs so that the PATH in the shell and the PATH when calling commands from Emacs are the same.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">exec-path-from-shell</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #E27E8D;">(</span>exec-path-from-shell-initialize<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-ace-window%20provides%20an%20ace-jump%20experience%20for%20switching%20windows" class="outline-3">
<h3 id="ace-window%20provides%20an%20ace-jump%20experience%20for%20switching%20windows">ace-window provides an ace-jump experience for switching windows</h3>
<div class="outline-text-3" id="text-ace-window%20provides%20an%20ace-jump%20experience%20for%20switching%20windows">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">ace-window</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Install%20a%20mode%20for%20drawing%20indentation%20guides" class="outline-3">
<h3 id="Install%20a%20mode%20for%20drawing%20indentation%20guides">Install a mode for drawing indentation guides</h3>
<div class="outline-text-3" id="text-Install%20a%20mode%20for%20drawing%20indentation%20guides">
<p>
This mode adds subtle coloration to indentation whitespace for whitespace-delimited languages like YAML where sometimes it can be difficult to see the nesting level of a given headline in deeply-nested configuration.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">highlight-indent-guides</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Quick%20buffer%20switcher" class="outline-3">
<h3 id="Quick%20buffer%20switcher">Quick buffer switcher</h3>
<div class="outline-text-3" id="text-Quick%20buffer%20switcher">
<blockquote>
<p>
PC style quick buffer switcher for Emacs
</p>

<p>
This switches Emacs buffers according to most-recently-used/least-recently-used order using C-tab and C-S-tab keys. It is similar to window or tab switchers that are available in PC desktop environments or applications.
</p>
</blockquote>

<p>
Bound by default to <code>C-&lt;TAB&gt;</code> and <code>C-S-&lt;TAB&gt;</code>, I have decided that these are sane defaults. Just install this and turn it on.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">pc-bufsw</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>pc-bufsw<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Writeable%20grep%20mode%20with%20ack" class="outline-3">
<h3 id="Writeable%20grep%20mode%20with%20ack">Writeable grep mode with ack</h3>
<div class="outline-text-3" id="text-Writeable%20grep%20mode%20with%20ack">
<p>
Writable grep mode allows you to edit the results from running grep on a project and easily save changes back to all of the original files
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">ack</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">wgrep-ack</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Better%20help%20buffers" class="outline-3">
<h3 id="Better%20help%20buffers">Better help buffers</h3>
<div class="outline-text-3" id="text-Better%20help%20buffers">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">helpful</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>global-set-key <span style="color: #E27E8D;">(</span>kbd <span style="color: #539AFC;">"C-h f"</span><span style="color: #E27E8D;">)</span> #'helpful-callable<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>global-set-key <span style="color: #E27E8D;">(</span>kbd <span style="color: #539AFC;">"C-h v"</span><span style="color: #E27E8D;">)</span> #'helpful-variable<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>global-set-key <span style="color: #E27E8D;">(</span>kbd <span style="color: #539AFC;">"C-h k"</span><span style="color: #E27E8D;">)</span> #'helpful-key<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Quickly%20jump%20around%20buffers" class="outline-3">
<h3 id="Quickly%20jump%20around%20buffers">Quickly jump around buffers</h3>
<div class="outline-text-3" id="text-Quickly%20jump%20around%20buffers">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">ace-jump-mode</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-Font" class="outline-2">
<h2 id="Font">Font</h2>
<div class="outline-text-2" id="text-Font">
<p>
The FiraCode font is a programming-focused font with ligatures that looks nice and has a open license so I'm standardizing my editor configuration on that font
</p>
</div>
<div id="outline-container-FiraCode%20Font%20Installation%20Script" class="outline-3">
<h3 id="FiraCode%20Font%20Installation%20Script">FiraCode Font Installation Script</h3>
<div class="outline-text-3" id="text-FiraCode%20Font%20Installation%20Script">
<p>
Installing fonts is always a pain so I'm going to use a variation of the installation script that the FireCode devs provide under their manual installation guide. This should be Linux-distribution agnostic, even though the font can be installed as a system package with on all of my systems on 2022-02-19 Sat with just
</p>

<pre class="example">
sudo apt install fonts-firacode
</pre>


<p>
because I don't intend to use Ubuntu as my only system forever. I just happen to be on Ubuntu on 2022-02-19 Sat.
</p>

<p>
But first, I want to be able to run this script every time Emacs starts, but only have the script actually do anything if the font is not already installed.
</p>

<p>
This guard will check to see if there's any font with 'fira' in it (case insensitive) and if so, just exits the script. This will happen on most executions.
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #5EC4FF; font-weight: bold;">set</span> <span style="color: #E27E8D;">-eo</span> pipefail
[[ <span style="color: #5EC4FF;">$(</span><span style="color: #5EC4FF; font-weight: bold;">fc-list | grep -i fira</span><span style="color: #5EC4FF;">)</span> <span style="color: #5EC4FF;">!=</span> <span style="color: #539AFC;">""</span> ]] <span style="color: #5EC4FF;">&amp;&amp;</span> <span style="color: #5EC4FF; font-weight: bold;">exit</span> 0
</pre>
</div>

<p>
Now here's the standard installation script, stripped of the shebang to go after my guard
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #718CA1;">fonts_dir</span>=<span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">HOME</span><span style="color: #5EC4FF;">}</span><span style="color: #539AFC;">/.local/share/fonts"</span>
<span style="color: #5EC4FF;">if</span> [ <span style="color: #5EC4FF; font-weight: bold;">!</span> -d <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">fonts_dir</span><span style="color: #5EC4FF;">}</span><span style="color: #539AFC;">"</span> ]<span style="color: #5EC4FF;">;</span> <span style="color: #5EC4FF;">then</span>
    <span style="color: #5EC4FF; font-weight: bold;">mkdir</span> <span style="color: #E27E8D;">-p</span> <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">fonts_dir</span><span style="color: #5EC4FF;">}</span><span style="color: #539AFC;">"</span>
<span style="color: #5EC4FF;">fi</span>

<span style="color: #718CA1;">version</span>=5.2
<span style="color: #718CA1;">zip</span>=Fira_Code_v<span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">version</span><span style="color: #5EC4FF;">}</span>.zip
<span style="color: #5EC4FF; font-weight: bold;">curl</span> <span style="color: #E27E8D;">--fail</span> <span style="color: #E27E8D;">--location</span> <span style="color: #E27E8D;">--show-error</span> https://github.com/tonsky/FiraCode/releases/download/<span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">version</span><span style="color: #5EC4FF;">}</span>/<span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">zip</span><span style="color: #5EC4FF;">}</span> <span style="color: #E27E8D;">--output</span> <span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">zip</span><span style="color: #5EC4FF;">}</span>
<span style="color: #5EC4FF; font-weight: bold;">unzip</span> <span style="color: #E27E8D;">-o</span> <span style="color: #E27E8D;">-q</span> <span style="color: #E27E8D;">-d</span> <span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">fonts_dir</span><span style="color: #5EC4FF;">}</span> <span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">zip</span><span style="color: #5EC4FF;">}</span>
<span style="color: #5EC4FF; font-weight: bold;">rm</span> <span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">zip</span><span style="color: #5EC4FF;">}</span>

<span style="color: #41505E;"># for now we need the Symbols font, too</span>
<span style="color: #718CA1;">zip</span>=FiraCode-Regular-Symbol.zip
<span style="color: #5EC4FF; font-weight: bold;">curl</span> <span style="color: #E27E8D;">--fail</span> <span style="color: #E27E8D;">--location</span> <span style="color: #E27E8D;">--show-error</span> https://github.com/tonsky/FiraCode/files/412440/<span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">zip</span><span style="color: #5EC4FF;">}</span> <span style="color: #E27E8D;">--output</span> <span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">zip</span><span style="color: #5EC4FF;">}</span>
<span style="color: #5EC4FF; font-weight: bold;">unzip</span> <span style="color: #E27E8D;">-o</span> <span style="color: #E27E8D;">-q</span> <span style="color: #E27E8D;">-d</span> <span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">fonts_dir</span><span style="color: #5EC4FF;">}</span> <span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">zip</span><span style="color: #5EC4FF;">}</span>
<span style="color: #5EC4FF; font-weight: bold;">rm</span> <span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">zip</span><span style="color: #5EC4FF;">}</span>

<span style="color: #5EC4FF; font-weight: bold;">fc-cache</span> <span style="color: #E27E8D;">-f</span>
</pre>
</div>

<p>
This installation script was sourced from <a href="https://github.com/tonsky/FiraCode/wiki/Linux-instructions#installing-with-a-package-manager">https://github.com/tonsky/FiraCode/wiki/Linux-instructions#installing-with-a-package-manager</a>
</p>
</div>
</div>

<div id="outline-container-Enable%20FiraCode%20Font" class="outline-3">
<h3 id="Enable%20FiraCode%20Font">Enable FiraCode Font</h3>
<div class="outline-text-3" id="text-Enable%20FiraCode%20Font">
<p>
Calling the script from above will install the font
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>shell-command <span style="color: #539AFC;">"chmod +x ~/.emacs.d/install-firacode-font.bash"</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>shell-command <span style="color: #539AFC;">"~/.emacs.d/install-firacode-font.bash"</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Enable it
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>add-to-list 'default-frame-alist '<span style="color: #E27E8D;">(</span>font . <span style="color: #539AFC;">"Fira Code-10"</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>set-frame-font <span style="color: #539AFC;">"Fira Code-10"</span> nil t<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Configure%20FiraCode%20special%20features" class="outline-3">
<h3 id="Configure%20FiraCode%20special%20features">Configure FiraCode special features</h3>
<div class="outline-text-3" id="text-Configure%20FiraCode%20special%20features">
<p>
FiraCode offers ligatures for programming symbols, which is cool. 
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">ligature</span>
  <span style="color: #5EC4FF;">:load-path</span> <span style="color: #539AFC;">"./vendor/"</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">Enable the "www" ligature in every possible major mode</span>
  <span style="color: #E27E8D;">(</span>ligature-set-ligatures 't '<span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"www"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">Enable traditional ligature support in eww-mode, if the</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">`</span><span style="color: #E27E8D;">variable-pitch</span><span style="color: #41505E;">' face supports it</span>
  <span style="color: #E27E8D;">(</span>ligature-set-ligatures 'eww-mode '<span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"ff"</span> <span style="color: #539AFC;">"fi"</span> <span style="color: #539AFC;">"ffi"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>

  <span style="color: #41505E;">;; </span><span style="color: #41505E;">;; Enable ligatures in programming modes                                                           </span>
  <span style="color: #E27E8D;">(</span>ligature-set-ligatures 'prog-mode '<span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"www"</span> <span style="color: #539AFC;">"**"</span> <span style="color: #539AFC;">"***"</span> <span style="color: #539AFC;">"**/"</span> <span style="color: #539AFC;">"*&gt;"</span> <span style="color: #539AFC;">"*/"</span> <span style="color: #539AFC;">"\\\\"</span> <span style="color: #539AFC;">"\\\\\\"</span> <span style="color: #539AFC;">"{-"</span>
                                       <span style="color: #539AFC;">":::"</span> <span style="color: #539AFC;">":="</span> <span style="color: #539AFC;">"!!"</span> <span style="color: #539AFC;">"!="</span> <span style="color: #539AFC;">"!=="</span> <span style="color: #539AFC;">"-}"</span> <span style="color: #539AFC;">"----"</span> <span style="color: #539AFC;">"--&gt;"</span> <span style="color: #539AFC;">"-&gt;"</span> <span style="color: #539AFC;">"-&gt;&gt;"</span>
                                       <span style="color: #539AFC;">"-&lt;"</span> <span style="color: #539AFC;">"-&lt;&lt;"</span> <span style="color: #539AFC;">"-~"</span> <span style="color: #539AFC;">"#{"</span> <span style="color: #539AFC;">"#["</span> <span style="color: #539AFC;">"##"</span> <span style="color: #539AFC;">"###"</span> <span style="color: #539AFC;">"####"</span> <span style="color: #539AFC;">"#("</span> <span style="color: #539AFC;">"#?"</span> <span style="color: #539AFC;">"#_"</span>
                                       <span style="color: #539AFC;">"#_("</span> <span style="color: #539AFC;">".-"</span> <span style="color: #539AFC;">".="</span> <span style="color: #539AFC;">".."</span> <span style="color: #539AFC;">"..&lt;"</span> <span style="color: #539AFC;">"..."</span> <span style="color: #539AFC;">"?="</span> <span style="color: #539AFC;">"??"</span> <span style="color: #539AFC;">";;"</span> <span style="color: #539AFC;">"/*"</span> <span style="color: #539AFC;">"/**"</span>
                                       <span style="color: #539AFC;">"/="</span> <span style="color: #539AFC;">"/=="</span> <span style="color: #539AFC;">"/&gt;"</span> <span style="color: #539AFC;">"//"</span> <span style="color: #539AFC;">"///"</span> <span style="color: #539AFC;">"&amp;&amp;"</span> <span style="color: #539AFC;">"||"</span> <span style="color: #539AFC;">"||="</span> <span style="color: #539AFC;">"|="</span> <span style="color: #539AFC;">"|&gt;"</span> <span style="color: #539AFC;">"^="</span> <span style="color: #539AFC;">"$&gt;"</span>
                                       <span style="color: #539AFC;">"++"</span> <span style="color: #539AFC;">"+++"</span> <span style="color: #539AFC;">"+&gt;"</span> <span style="color: #539AFC;">"=:="</span> <span style="color: #539AFC;">"=="</span> <span style="color: #539AFC;">"==="</span> <span style="color: #539AFC;">"==&gt;"</span> <span style="color: #539AFC;">"=&gt;"</span> <span style="color: #539AFC;">"=&gt;&gt;"</span> <span style="color: #539AFC;">"&lt;="</span>
                                       <span style="color: #539AFC;">"=&lt;&lt;"</span> <span style="color: #539AFC;">"=/="</span> <span style="color: #539AFC;">"&gt;-"</span> <span style="color: #539AFC;">"&gt;="</span> <span style="color: #539AFC;">"&gt;=&gt;"</span> <span style="color: #539AFC;">"&gt;&gt;"</span> <span style="color: #539AFC;">"&gt;&gt;-"</span> <span style="color: #539AFC;">"&gt;&gt;="</span> <span style="color: #539AFC;">"&gt;&gt;&gt;"</span> <span style="color: #539AFC;">"&lt;*"</span>
                                       <span style="color: #539AFC;">"&lt;*&gt;"</span> <span style="color: #539AFC;">"&lt;|"</span> <span style="color: #539AFC;">"&lt;|&gt;"</span> <span style="color: #539AFC;">"&lt;$"</span> <span style="color: #539AFC;">"&lt;$&gt;"</span> <span style="color: #539AFC;">"&lt;!--"</span> <span style="color: #539AFC;">"&lt;-"</span> <span style="color: #539AFC;">"&lt;--"</span> <span style="color: #539AFC;">"&lt;-&gt;"</span> <span style="color: #539AFC;">"&lt;+"</span>
                                       <span style="color: #539AFC;">"&lt;+&gt;"</span> <span style="color: #539AFC;">"&lt;="</span> <span style="color: #539AFC;">"&lt;=="</span> <span style="color: #539AFC;">"&lt;=&gt;"</span> <span style="color: #539AFC;">"&lt;=&lt;"</span> <span style="color: #539AFC;">"&lt;&gt;"</span> <span style="color: #539AFC;">"&lt;&lt;"</span> <span style="color: #539AFC;">"&lt;&lt;-"</span> <span style="color: #539AFC;">"&lt;&lt;="</span> <span style="color: #539AFC;">"&lt;&lt;&lt;"</span>
                                       <span style="color: #539AFC;">"&lt;~"</span> <span style="color: #539AFC;">"&lt;~~"</span> <span style="color: #539AFC;">"&lt;/"</span> <span style="color: #539AFC;">"&lt;/&gt;"</span> <span style="color: #539AFC;">"~@"</span> <span style="color: #539AFC;">"~-"</span> <span style="color: #539AFC;">"~&gt;"</span> <span style="color: #539AFC;">"~~"</span> <span style="color: #539AFC;">"~~&gt;"</span> <span style="color: #539AFC;">"%%"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>

  <span style="color: #41505E;">;; </span><span style="color: #41505E;">disabled combinations that could be ligatures</span>
  <span style="color: #41505E;">;;  </span><span style="color: #41505E;">"::"</span>

 <span style="color: #E27E8D;">(</span>global-ligature-mode 't<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-Language%20Configuration" class="outline-2">
<h2 id="Language%20Configuration">Language Configuration</h2>
<div class="outline-text-2" id="text-Language%20Configuration">
<p>
This section contains all of the IDE-like features in my configuration, centered around LSP (lsp-mode) and  DAP, at least for today.
</p>
</div>
<div id="outline-container-Language%20Server%20Protocol" class="outline-3">
<h3 id="Language%20Server%20Protocol">Language Server Protocol</h3>
<div class="outline-text-3" id="text-Language%20Server%20Protocol">
<p>
LSP provides a generic interface for text editors to talk to various language servers on the backend. A few languages utilize LSP so it gets configured before the language-specific section.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">lsp-mode</span>
  <span style="color: #5EC4FF;">:init</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">use flycheck</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> lsp-prefer-flymake nil<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> lsp-headerline-breadcrumb-enable nil<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">treemacs integration</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">lsp-treemacs</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">the UI</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">lsp-ui</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">linking breaks treemacs</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">also it's annoying</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> lsp-enable-links nil<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">helm integration</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">helm-lsp</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> lsp-eldoc-enable-hover t<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> lsp-ui-doc-enable t<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> lsp-ui-doc-include-signature t<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> lsp-ui-doc-position 'at-point<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> lsp-ui-doc-use-childframe t<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> lsp-ui-doc-use-webkit nil<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> lsp-lens-enable nil<span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>general-define-key
 <span style="color: #5EC4FF;">:states</span> 'normal
 <span style="color: #5EC4FF;">:keymaps</span> 'prog-mode-map
   <span style="color: #539AFC;">",d"</span>     'lsp-describe-thing-at-point
   <span style="color: #539AFC;">",gg"</span>    'lsp-find-definition
   <span style="color: #539AFC;">",gt"</span>    'lsp-find-type-definition
   <span style="color: #539AFC;">",i"</span>     'lsp-find-implementation
   <span style="color: #539AFC;">",n"</span>     'lsp-rename
   <span style="color: #539AFC;">",r"</span>     'lsp-ui-peek-find-references
   <span style="color: #539AFC;">",R"</span>     'lsp-find-references
   <span style="color: #539AFC;">",x"</span>     'lsp-execute-code-action
   <span style="color: #539AFC;">",lsp"</span>   'lsp-workspace-restart
   <span style="color: #539AFC;">"gd"</span>     'lsp-find-definition
   <span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>

<div id="outline-container-Fix%20background%20color%20of%20lsp-ui-doc%20in%20various%20themes" class="outline-4">
<h4 id="Fix%20background%20color%20of%20lsp-ui-doc%20in%20various%20themes">Fix background color of lsp-ui-doc in various themes</h4>
<div class="outline-text-4" id="text-Fix%20background%20color%20of%20lsp-ui-doc%20in%20various%20themes">
<p>
By default, for some reason, lsp-ui-doc chooses an ugly background color that looks bad and doesn't match the background surrounding most of the text.
</p>

<p>
I had to edit a few faces with Customize. Some notes:
</p>

<ol class="org-ol">
<li>By default, the background color is interrupted by a mismatch with <code>markdown-code-face</code> which doesn't match <code>lsp-ui-doc-background</code></li>

<li>Thus, <code>lsp-ui-doc-background</code> is set via <code>M-x customize-face</code> to inherit from (match) <code>markdown-code-face</code> and saved in <code>.emacs-custom.el</code></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-Tree%20Sitter" class="outline-3">
<h3 id="Tree%20Sitter">Tree Sitter</h3>
<div class="outline-text-3" id="text-Tree%20Sitter">
<p>
Tree-sitter reads the AST to provide better syntax highlighting
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">tree-sitter</span>
  <span style="color: #5EC4FF;">:diminish</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">tree-sitter-langs</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>add-hook 'tree-sitter-after-on-hook #'tree-sitter-hl-mode<span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>global-tree-sitter-mode<span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">tree-sitter-langs</span>
  <span style="color: #5EC4FF;">:ensure</span> t
  <span style="color: #5EC4FF;">:after</span> tree-sitter
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #E27E8D;">(</span>tree-sitter-require 'tsx<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>add-to-list 'tree-sitter-major-mode-language-alist '<span style="color: #8BD49C;">(</span>web-mode . tsx<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-YAML" class="outline-3">
<h3 id="YAML">YAML</h3>
<div class="outline-text-3" id="text-YAML">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">yaml-mode</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-hook 'yaml-mode-hook 'highlight-indent-guides-mode<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Markdown" class="outline-3">
<h3 id="Markdown">Markdown</h3>
<div class="outline-text-3" id="text-Markdown">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">markdown-mode</span>
  <span style="color: #5EC4FF;">:ensure</span> t
  <span style="color: #5EC4FF;">:mode</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"README\\.md\\'"</span> . gfm-mode<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.md\\'"</span> . gfm-mode<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.markdown\\'"</span> . gfm-mode<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-hook 'markdown-mode-hook 'visual-line-mode<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-hook 'markdown-mode-hook 'variable-pitch-mode<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">this can go here because it affects Markdown's live preview mode</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">but I should consider putting it somewhere more general maybe?</span>
<span style="color: #5EC4FF;">(</span>add-hook 'eww-mode-hook 'visual-line-mode<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">show code blocks w/ monospace font</span>
<span style="color: #5EC4FF;">(</span>set-face-attribute 'markdown-code-face nil <span style="color: #5EC4FF;">:inherit</span> 'fixed-pitch<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Docker" class="outline-3">
<h3 id="Docker">Docker</h3>
<div class="outline-text-3" id="text-Docker">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">dockerfile-mode</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-to-list 'auto-mode-alist '<span style="color: #E27E8D;">(</span><span style="color: #539AFC;">"Dockerfile\\'"</span> . dockerfile-mode<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>put 'dockerfile-image-name 'safe-local-variable #'stringp<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Python" class="outline-3">
<h3 id="Python">Python</h3>
<div class="outline-text-3" id="text-Python">
<p>
<code>auto-virtualenv</code> looks in <code>$WORKON_HOME</code> for virtualenvs, and then I can run <code>M-x pyvenv-workon RET project RET</code> to choose my virtualenv for <code>project</code>, found in <code>$WORKON_HOME</code>, or a symlink anyway.
</p>


<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">auto-virtualenv</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-hook 'python-mode-hook 'auto-virtualenv-set-virtualenv<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>setenv <span style="color: #539AFC;">"WORKON_HOME"</span> <span style="color: #539AFC;">"~/.virtualenvs"</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
So the convention for use is:
</p>

<ol class="org-ol">
<li>Create a virtualenv as usual for the project</li>
<li>Symlink it inside ~/.virtualenvs</li>
<li><code>M-x pyvenv-workon</code></li>
</ol>
</div>
</div>

<div id="outline-container-Go" class="outline-3">
<h3 id="Go">Go</h3>
<div class="outline-text-3" id="text-Go">
<p>
Go is my primary language so it's my most dynamic and complicated configuration.
</p>
</div>
<div id="outline-container-Dependencies" class="outline-4">
<h4 id="Dependencies">Dependencies</h4>
<div class="outline-text-4" id="text-Dependencies">
<p>
Go support requires some dependencies. I will try to list them all here.
Stuff I have installed has some overlap because of the in-progress move to LSP, but I'll prune it later.
</p>

<ul class="org-ul">
<li>First, <code>go</code> itself must be installed, install however, and avalailable on the <code>PATH</code>.</li>

<li><code>gopls</code>, the language server for LSP mentioned above <a href="https://github.com/golang/tools/blob/master/gopls/doc/user.md">https://github.com/golang/tools/blob/master/gopls/doc/user.md</a>. I have been just running this off of <code>master</code> so I can experience all the latest <del>bugs</del> features, so clone the gopls project (TODO find the url for it and put a link here) and <code>go install</code> it. After you're done <code>gopls</code> should also be on the <code>PATH</code>.
<a href="https://github.com/golang/tools/blob/master/gopls/doc/emacs.md#gopls-configuration">Directions for configuring <code>gopls</code> through this file are found here.</a></li>

<li><code>golint</code> has to be installed independently</li>
</ul>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #5EC4FF;">$</span> <span style="color: #E27E8D;">go</span> get https://github.com/golang/lint
</pre>
</div>

<p>
Nothing to do with Emacs, but <code>eg</code> also looks really cool:
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #5EC4FF;">$</span> <span style="color: #E27E8D;">go</span> get golang.org/x/tools/cmd/eg
</pre>
</div>

<ul class="org-ul">
<li><a href="https://github.com/golangci/golangci-lint"><code>golangci-lint</code></a> is a meta linter that calls a bunch of 3rd party linters (configurable) and replaces the old one that used to freeze my computer. <code>go-metalinter</code>, I think, is what it was called. Anyway, it used to crash my computer and <i>apparently</i> that was a common experience. Anyway <code>golangci-lint</code> must be installed independently, too:</li>
</ul>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #41505E;"># install it into ./bin/</span>
<span style="color: #5EC4FF;">$</span> <span style="color: #E27E8D;">curl</span> <span style="color: #E27E8D;">-sSfL</span> https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh <span style="color: #5EC4FF;">|</span> <span style="color: #5EC4FF; font-weight: bold;">sh</span> <span style="color: #E27E8D;">-s</span> v1.23.6
</pre>
</div>
</div>
</div>

<div id="outline-container-Initial%20Setup" class="outline-4">
<h4 id="Initial%20Setup">Initial Setup</h4>
<div class="outline-text-4" id="text-Initial%20Setup">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">set-gopls-lib-dirs</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Add $GOPATH/pkg/mod to the 'library path'."</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">stops lsp from continually asking if Go projects should be imported</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> lsp-clients-go-library-directories
        <span style="color: #8BD49C;">(</span>list
         <span style="color: #539AFC;">"/usr"</span>
         <span style="color: #B62D65;">(</span>concat <span style="color: #33CED8;">(</span>getenv <span style="color: #539AFC;">"GOPATH"</span><span style="color: #33CED8;">)</span> <span style="color: #539AFC;">"/pkg/mod"</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">go-mode</span>
  <span style="color: #5EC4FF;">:hook</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>go-mode . lsp-deferred<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span>go-mode . set-gopls-lib-dirs<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span>go-mode . yas-minor-mode<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">fixes ctrl-o after goto-definition by telling evil that godef-jump jumps</span>
  <span style="color: #41505E;">;; </span><span style="color: #41505E;">I don't believe I need to do this anymore, as I use lsp instead of godef now</span>
  <span style="color: #E27E8D;">(</span>evil-add-command-properties #'godef-jump <span style="color: #5EC4FF;">:jump</span> t<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">enable golangci-lint to work with flycheck</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">flycheck-golangci-lint</span>
  <span style="color: #5EC4FF;">:hook</span> <span style="color: #E27E8D;">(</span>go-mode . flycheck-golangci-lint-setup<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Package%20and%20Configuration%20for%20Executing%20Tests" class="outline-4">
<h4 id="Package%20and%20Configuration%20for%20Executing%20Tests">Package and Configuration for Executing Tests</h4>
<div class="outline-text-4" id="text-Package%20and%20Configuration%20for%20Executing%20Tests">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">gotest</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>advice-add 'go-test-current-project <span style="color: #5EC4FF;">:before</span> #'projectile-save-project-buffers<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>advice-add 'go-test-current-test <span style="color: #5EC4FF;">:before</span> #'projectile-save-project-buffers<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-hook 'go-test-mode-hook 'visual-line-mode<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Enable%20Go%20struct%20memory%20optimiztion%20linting%20setting" class="outline-4">
<h4 id="Enable%20Go%20struct%20memory%20optimiztion%20linting%20setting">Enable Go struct memory optimiztion linting setting</h4>
<div class="outline-text-4" id="text-Enable%20Go%20struct%20memory%20optimiztion%20linting%20setting">
<p>
Go does not optimize the ordering of struct fields in memory in order to preserve space, so space can be wasted depending upon the order of the struct fields. This setting will tell gopls to call this out.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>lsp-register-custom-settings
 '<span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"gopls.analyses"</span> <span style="color: #539AFC;">"fieldalignment"</span> t<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-REPL" class="outline-4">
<h4 id="REPL">REPL</h4>
<div class="outline-text-4" id="text-REPL">
<p>
<a href="https://github.com/motemen/gore">Gore</a> provides a REPL and <a href="https://github.com/manute/gorepl-mode">gorepl-mode</a> lets you use it from Emacs. In order to use the REPL from Emacs, you must first install Gore:
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #5EC4FF; font-weight: bold;">go</span> get <span style="color: #E27E8D;">-u</span> github.com/motemen/gore/cmd/gore
</pre>
</div>
<p>
Gore also uses gocode for code completion, so install that (even though Emacs uses go-pls for the same).
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: #5EC4FF; font-weight: bold;">go</span> get <span style="color: #E27E8D;">-u</span> github.com/mdempsky/gocode
</pre>
</div>

<p>
Once that's done <code>gorepl-mode</code> is ready to be installed:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">gorepl-mode</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Interactive%20debugger" class="outline-4">
<h4 id="Interactive%20debugger">Interactive debugger</h4>
<div class="outline-text-4" id="text-Interactive%20debugger">
<p>
I got jealous of a coworker with an IDE who apparently has an interactive debugger, so I got <code>dap-mode</code> working üôÇ
</p>
</div>
<ul class="org-ul">
<li><a id="Installation%20and%20Configuration"></a>Installation and Configuration<br />
<div class="outline-text-5" id="text-Installation%20and%20Configuration">
<p>
Install <code>dap-mode</code> and <code>dap-go</code>. <code>dap-mode</code> is probably useful for other languages so at some point I will want to refactor it out and install it alongside LSP, but keep <code>dap-go</code> here. Probably. But this works for now, and who knows, maybe debugging Go is really all I care about.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">dap-mode</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">dap-dlv-go</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>dap-mode 0<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>dap-ui-mode 0<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>dap-ui-controls-mode 0<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>tooltip-mode 1<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> dap-ui-variable-length 100<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>

<ul class="org-ul">
<li><a id="On%20first%20install"></a>On first install<br />
<div class="outline-text-6" id="text-On%20first%20install">
<p>
Theoretically you should be able to run this
</p>
<pre class="example">
M-x dap-go-setup
</pre>


<p>
But it is subject to rate-limiting so I just checked in the results of calling this under <code>.extension</code>. It's all MIT-licensed so this is fine.
</p>
</div>
</li>
</ul>
</li>

<li><a id="Use"></a>Use<br />
<ul class="org-ul">
<li><a id="When%20debugging%20a%20new%20executable%20for%20the%20first%20time"></a>When debugging a new executable for the first time<br />
<div class="outline-text-6" id="text-When%20debugging%20a%20new%20executable%20for%20the%20first%20time">
<p>
Run this command
</p>
<pre class="example">
M-x dap-debug-edit-template
</pre>

<p>
and save the <code>(dap-register-debug-template )</code> call that is generated.. somewhere alongside the code hopefully.
I'll come up with some convention for storing these.
Maybe dir-locals (<code>SPC p E</code>)
</p>
</div>
</li>
<li><a id="Each%20time%20when%20ready%20to%20start%20debugging"></a>Each time when ready to start debugging<br />
<div class="outline-text-6" id="text-Each%20time%20when%20ready%20to%20start%20debugging">
<p>
Start debugging by running:
</p>
<pre class="example">
M-x dap-debug
</pre>

<p>
Click in the margins to set breakpoints with <code>dap-ui-mode</code> enabled (üôå)
</p>
</div>
</li>
</ul>
</li>
</ul>
</div>

<div id="outline-container-Mode-Specific%20Keybindings" class="outline-4">
<h4 id="Mode-Specific%20Keybindings">Mode-Specific Keybindings</h4>
<div class="outline-text-4" id="text-Mode-Specific%20Keybindings">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>general-define-key
 <span style="color: #5EC4FF;">:states</span>  'normal
 <span style="color: #5EC4FF;">:keymaps</span> 'go-mode-map
 <span style="color: #539AFC;">",a"</span>     'go-import-add
 <span style="color: #539AFC;">",d"</span>     'lsp-describe-thing-at-point
 <span style="color: #539AFC;">"gd"</span>    'lsp-find-definition
 <span style="color: #539AFC;">",gt"</span>    'lsp-find-type-definition
 <span style="color: #539AFC;">",i"</span>     'lsp-find-implementation
 <span style="color: #539AFC;">",n"</span>     'lsp-rename
 <span style="color: #539AFC;">",r"</span>     'lsp-ui-peek-find-references
 <span style="color: #539AFC;">",R"</span>     'lsp-find-references
 <span style="color: #539AFC;">",tp"</span>    'go-test-current-project
 <span style="color: #539AFC;">",tt"</span>    'go-test-current-test
 <span style="color: #539AFC;">",tf"</span>    'go-test-current-file
 <span style="color: #539AFC;">",x"</span>     'lsp-execute-code-action
 <span style="color: #539AFC;">",lsp"</span>   'lsp-workspace-restart
 <span style="color: #539AFC;">"gd"</span>     'lsp-find-definition

 <span style="color: #41505E;">;; </span><span style="color: #41505E;">using the ,c namespace for repl and debug stuff to follow the C-c</span>
 <span style="color: #41505E;">;; </span><span style="color: #41505E;">convention found in other places in Emacs</span>
 <span style="color: #539AFC;">",cc"</span>     'dap-debug
 <span style="color: #539AFC;">",cr"</span>     'gorepl-run
 <span style="color: #539AFC;">",cg"</span>     'gorepl-run-load-current-file
 <span style="color: #539AFC;">",cx"</span>     'gorepl-eval-region
 <span style="color: #539AFC;">",cl"</span>     'gorepl-eval-line
  <span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>autoload 'go-mode <span style="color: #539AFC;">"go-mode"</span> nil t<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-to-list 'auto-mode-alist '<span style="color: #E27E8D;">(</span><span style="color: #539AFC;">"\\.go\\'"</span> . go-mode<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Hooks" class="outline-4">
<h4 id="Hooks">Hooks</h4>
<div class="outline-text-4" id="text-Hooks">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">disable "Organize Imports" warning that never goes away</span>
<span style="color: #5EC4FF;">(</span>add-hook 'go-mode-hook
          <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">lambda</span> <span style="color: #8BD49C;">()</span>
            <span style="color: #41505E;">;; </span><span style="color: #41505E;">Go likes origami-mode</span>
            <span style="color: #41505E;">;; </span><span style="color: #41505E;">(origami-mode)</span>
            <span style="color: #41505E;">;; </span><span style="color: #41505E;">lsp ui sideline code actions are annoying in Go</span>
            <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">setq-local</span> lsp-ui-sideline-show-code-actions nil<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">sets the visual tab width to 2 spaces per tab in Go buffers</span>
<span style="color: #5EC4FF;">(</span>add-hook 'go-mode-hook <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">lambda</span> <span style="color: #8BD49C;">()</span>
                          <span style="color: #8BD49C;">(</span>set <span style="color: #B62D65;">(</span>make-local-variable 'tab-width<span style="color: #B62D65;">)</span> 2<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>


<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">lsp-go-install-save-hooks</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #E27E8D;">(</span>add-hook 'before-save-hook #'lsp-format-buffer t t<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>add-hook 'before-save-hook #'lsp-organize-imports t t<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>add-hook 'go-mode-hook #'lsp-go-install-save-hooks<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Exclude%20a%20certain%20folder%20from%20LSP%20projects" class="outline-4">
<h4 id="Exclude%20a%20certain%20folder%20from%20LSP%20projects">Exclude a certain folder from LSP projects</h4>
<div class="outline-text-4" id="text-Exclude%20a%20certain%20folder%20from%20LSP%20projects">
<p>
Certain projects use a gopath folder inside the project root and this confuses LSP/gopls.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">with-eval-after-load</span> 'lsp-mode
  <span style="color: #E27E8D;">(</span>add-to-list 'lsp-file-watch-ignored-directories <span style="color: #539AFC;">"[/\\\\]\\.GOPATH\\'"</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Incidentally, that regex up there is a fucking nightmare and Emacs Lisp should be ashamed. That or maybe there's some secret way to do it so there isn't backslash hell. But holy crap that is a horrible line of code. I think we can all agree with that.
</p>
</div>
</div>
</div>

<div id="outline-container-Rust" class="outline-3">
<h3 id="Rust">Rust</h3>
<div class="outline-text-3" id="text-Rust">
<p>
To install the Rust language server:
</p>
<ol class="org-ol">
<li>Install <code>rustup</code>.</li>
<li>Run <code>rustup component add rls rust-analysis rust-src</code>.</li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">rust-mode</span>
  <span style="color: #5EC4FF;">:mode</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.rs$"</span> . rust-mode<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">:hook</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>rust-mode . lsp-deferred<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>


<span style="color: #5EC4FF;">(</span>general-define-key
 <span style="color: #5EC4FF;">:states</span>  'normal
 <span style="color: #5EC4FF;">:keymaps</span> 'rust-mode-map
 <span style="color: #539AFC;">",d"</span>     'lsp-describe-thing-at-point
 <span style="color: #539AFC;">",gg"</span>    'lsp-find-definition
 <span style="color: #539AFC;">",gt"</span>    'lsp-find-type-definition
 <span style="color: #539AFC;">",i"</span>     'lsp-find-implementation
 <span style="color: #539AFC;">",n"</span>     'lsp-rename
 <span style="color: #539AFC;">",r"</span>     'lsp-find-references
 <span style="color: #539AFC;">",x"</span>     'lsp-execute-code-action
 <span style="color: #539AFC;">",lsp"</span>   'lsp-workspace-restart
 <span style="color: #539AFC;">"gd"</span>     'lsp-find-definition
 <span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">lsp-rust-install-save-hooks</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #E27E8D;">(</span>add-hook 'before-save-hook #'lsp-format-buffer t t<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>add-hook 'rust-mode-hook #'lsp-rust-install-save-hooks<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Web" class="outline-3">
<h3 id="Web">Web</h3>
<div class="outline-text-3" id="text-Web">
<p>
After some amount of searching and fumbling about I have discovered <a href="http://web-mode.org/"><code>web-mode</code></a> which appears to be the one-stop-shop solution for all of your HTML and browser-related needs. It handles a whole slew of web-related languages and templating formats and plays nicely with LSP. It's also the only package that I could find that supported <code>.tsx</code> files at all.
</p>

<p>
So yay for <code>web-mode</code>!
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">web-mode</span>
  <span style="color: #5EC4FF;">:mode</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.html$"</span> . web-mode<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.js$"</span>   . web-mode<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.jsx$"</span>  . web-mode<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.ts$"</span>   . web-mode<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.tsx$"</span>  . web-mode<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.css$"</span>  . web-mode<span style="color: #8BD49C;">)</span>
         <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.svelte$"</span> . web-mode<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">:hook</span>
  <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>web-mode . lsp-deferred<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>

  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> web-mode-enable-css-colorization t<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> web-mode-enable-auto-pairing t<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> web-mode-enable-auto-quoting nil<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>

<div id="outline-container-enable%20jsx%20mode%20for%20all%20.js%20and%20.jsx%20files" class="outline-4">
<h4 id="enable%20jsx%20mode%20for%20all%20.js%20and%20.jsx%20files">enable jsx mode for all .js and .jsx files</h4>
<div class="outline-text-4" id="text-enable%20jsx%20mode%20for%20all%20.js%20and%20.jsx%20files">
<p>
If working on projects that do not use JSX, might need to move this to
a project-specific config somewhere.
</p>

<p>
For now though, this is sufficient for me
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> web-mode-content-types-alist
      '<span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"jsx"</span> . <span style="color: #539AFC;">"\\.js[x]?\\'"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Thanks to <a href="https://prathamesh.tech/2015/06/20/configuring-web-mode-with-jsx/">https://prathamesh.tech/2015/06/20/configuring-web-mode-with-jsx/</a>
</p>
</div>
</div>

<div id="outline-container-enable%20Prettier%20auto-formatting%20for%20JavaScript%20and%20TypeScript" class="outline-4">
<h4 id="enable%20Prettier%20auto-formatting%20for%20JavaScript%20and%20TypeScript">enable Prettier auto-formatting for JavaScript and TypeScript</h4>
<div class="outline-text-4" id="text-enable%20Prettier%20auto-formatting%20for%20JavaScript%20and%20TypeScript">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">prettier-js</span>
  <span style="color: #5EC4FF;">:hook</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>web-mode . prettier-js-mode<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-Setting%20highlighting%20for%20special%20template%20modes" class="outline-4">
<h4 id="Setting%20highlighting%20for%20special%20template%20modes">Setting highlighting for special template modes</h4>
<div class="outline-text-4" id="text-Setting%20highlighting%20for%20special%20template%20modes">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">web-mode can provide syntax highlighting for many template</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">engines, but it can't detect the right one if the template uses a generic ending.</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">If a project uses a generic ending for its templates, such</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">as .html, add it below. It would be more elegant to handle this by</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">setting this variable in .dir-locals.el for each project,</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">unfortunately due to this https://github.com/fxbois//issues/799 that</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">is not possible :(</span>

<span style="color: #41505E;">;;</span><span style="color: #41505E;">(setq web-mode-engines-alist '(</span>
<span style="color: #41505E;">;;        </span><span style="color: #41505E;">("go" . ".*example_project_dir/.*\\.html\\'")</span>
        <span style="color: #41505E;">;; </span><span style="color: #41505E;">add more projects here..</span>
<span style="color: #41505E;">;;        </span><span style="color: #41505E;">))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-JSON" class="outline-3">
<h3 id="JSON">JSON</h3>
<div class="outline-text-3" id="text-JSON">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">json-mode</span>
  <span style="color: #5EC4FF;">:mode</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"\\.json$"</span> . json-mode <span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>add-hook 'json-mode-hook 'highlight-indent-guides-mode<span style="color: #5EC4FF;">)</span>
</pre>
</div>


<blockquote>
<p>
Default Keybindings
    C-c C-f: format the region/buffer with json-reformat (<a href="https://github.com/gongo/json-reformat">https://github.com/gongo/json-reformat</a>)
    C-c C-p: display a path to the object at point with json-snatcher (<a href="https://github.com/Sterlingg/json-snatcher">https://github.com/Sterlingg/json-snatcher</a>)
    C-c P: copy a path to the object at point to the kill ring with json-snatcher (<a href="https://github.com/Sterlingg/json-snatcher">https://github.com/Sterlingg/json-snatcher</a>)
    C-c C-t: Toggle between true and false at point
    C-c C-k: Replace the sexp at point with null
    C-c C-i: Increment the number at point
    C-c C-d: Decrement the number at point
</p>
</blockquote>
</div>
</div>

<div id="outline-container-Shell" class="outline-3">
<h3 id="Shell">Shell</h3>
<div class="outline-text-3" id="text-Shell">
<p>
Shell mode is pretty good vanilla, but I prefer to use spaces rather than tabs for indents with languages like Bash because they just tend to format more reliably. Tabs are .. theoretically more flexible, so maybe I can come back to consider this.
</p>

<p>
But for now, disable <code>indent-tabs-mode</code> in shell script editing mode because I have been observing behavior from <code>whitespace-cleanup-mode</code> that when <code>indent-tabs-mode</code> is <code>t</code> it will change 4 spaces to a tab even if there are other spaces being used for indent, even on the same line, and regardless as to the never-ending debate about spaces and tabs and all that, everyone can agree that 1) mixing spaces and tabs is terrible and 2) your editor shouldn't be mixing spaces and tabs automatically at pre-save time.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>add-hook 'sh-mode-hook
          <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">lambda</span> <span style="color: #8BD49C;">()</span>
            <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">defvar-local</span> <span style="color: #718CA1;">indent-tabs-mode</span> nil<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
<div id="outline-container-I%20don%27t%20know%20if%20this%20still%20works%20%F0%9F%91%86" class="outline-4">
<h4 id="I%20don%27t%20know%20if%20this%20still%20works%20%F0%9F%91%86"><span class="todo TODO">TODO</span> I don't know if this still works üëÜ</h4>
</div>
</div>
<div id="outline-container-Salt" class="outline-3">
<h3 id="Salt">Salt</h3>
<div class="outline-text-3" id="text-Salt">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">salt-mode</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-hook 'salt-mode-hook
        <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">lambda</span> <span style="color: #8BD49C;">()</span>
            <span style="color: #8BD49C;">(</span>flyspell-mode 1<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>


<span style="color: #5EC4FF;">(</span>general-define-key
 <span style="color: #5EC4FF;">:states</span>  'normal
 <span style="color: #5EC4FF;">:keymaps</span> 'sh-mode-map
 <span style="color: #539AFC;">",c"</span> <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">general-simulate-key</span> <span style="color: #539AFC;">"C-x h C-M-x"</span><span style="color: #E27E8D;">)</span>
 <span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Vyper" class="outline-3">
<h3 id="Vyper">Vyper</h3>
<div class="outline-text-3" id="text-Vyper">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">vyper-mode</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Elixir" class="outline-3">
<h3 id="Elixir">Elixir</h3>
<div class="outline-text-3" id="text-Elixir">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">elixir-mode</span>
  <span style="color: #5EC4FF;">:hook</span>
  <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>elixir-mode . lsp-deferred<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">)</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">Create a buffer-local hook to run elixir-format on save, only when we enable elixir-mode.</span>
<span style="color: #5EC4FF;">(</span>add-hook 'elixir-mode-hook
          <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">lambda</span> <span style="color: #8BD49C;">()</span> <span style="color: #8BD49C;">(</span>add-hook 'before-save-hook 'elixir-format nil t<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-SQL" class="outline-3">
<h3 id="SQL">SQL</h3>
<div class="outline-text-3" id="text-SQL">
<p>
SQL support is pretty good out of the box but Emacs strangely doesn't indent SQL by default. This package fixes that.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">sql-indent</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-Adaptive%20Wrap%20and%20Visual%20Line%20Mode" class="outline-2">
<h2 id="Adaptive%20Wrap%20and%20Visual%20Line%20Mode">Adaptive Wrap and Visual Line Mode</h2>
<div class="outline-text-2" id="text-Adaptive%20Wrap%20and%20Visual%20Line%20Mode">
<p>
Here I've done some black magic fuckery for a few modes. Heathens in modern languages and also some other prose modes don't wrap their long lines at 80 characters like God intended so instead of using visual-column-mode which I think does something similar but probably would've been easier, I've defined an abomination of a combination of <code>visual-line-mode</code> (built-in) and <a href="https://elpa.gnu.org/packages/adaptive-wrap.html">adaptive-wrap-prefix-mode</a> to <b><b>dynamically (visually) wrap and indent long lines in languages like Go with no line length limit</b></b> so they look nice on my screen at any window width and don't change the underlying file ‚Äî and it's actually pretty cool.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">adaptive-wrap</span>
  <span style="color: #5EC4FF;">:config</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq-default</span> adaptive-wrap-extra-indent 2<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">adaptive-and-visual-line-mode</span> <span style="color: #8BD49C;">(</span>hook<span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>add-hook hook <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">lambda</span> <span style="color: #33CED8;">()</span>
                      <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">progn</span>
                        <span style="color: #5EC4FF;">(</span>visual-line-mode<span style="color: #5EC4FF;">)</span>
                        <span style="color: #5EC4FF;">(</span>adaptive-wrap-prefix-mode<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>

  <span style="color: #E27E8D;">(</span>mapc 'adaptive-and-visual-line-mode
        <span style="color: #8BD49C;">(</span>list
         'markdown-mode
         'go-mode-hook
         'js2-mode-hook
         'yaml-mode-hook
         'rjsx-mode-hook<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>

  <span style="color: #E27E8D;">(</span>add-hook 'compilation-mode-hook
            #'adaptive-wrap-prefix-mode<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> compilation-scroll-output t<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Global%20Keybindings" class="outline-2">
<h2 id="Global%20Keybindings">Global Keybindings</h2>
<div class="outline-text-2" id="text-Global%20Keybindings">
</div>
<div id="outline-container-Helper%20Functions" class="outline-3">
<h3 id="Helper%20Functions">Helper Functions</h3>
<div class="outline-text-3" id="text-Helper%20Functions">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">find-initfile</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Open main config file."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>find-file <span style="color: #539AFC;">"~/.emacs.d/ian.org"</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">find-initfile-other-frame</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Open main config file in a new frame."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>find-file-other-frame <span style="color: #539AFC;">"~/.emacs.d/ian.org"</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">reload-initfile</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Reload the main config file."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>org-babel-tangle <span style="color: #539AFC;">"~/.emacs.d/ian.org"</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>byte-compile-file <span style="color: #539AFC;">"~/.emacs.d/ian.el"</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">close-client-frame</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Exit emacsclient."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>server-edit <span style="color: #539AFC;">"Done"</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">last-window</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Switch to the last window."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>other-window -1 t<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">toggle-line-numbers-rel-abs</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Toggles line numbers between relative and absolute numbering"</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">if</span> <span style="color: #8BD49C;">(</span>equal display-line-numbers-type 'relative<span style="color: #8BD49C;">)</span>
      <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">setq</span> display-line-numbers-type 'absolute<span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">setq</span> display-line-numbers-type 'relative<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">if</span> <span style="color: #8BD49C;">(</span>equal display-line-numbers-mode t<span style="color: #8BD49C;">)</span>
      <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">progn</span>
        <span style="color: #B62D65;">(</span>display-line-numbers-mode -1<span style="color: #B62D65;">)</span>
        <span style="color: #B62D65;">(</span>display-line-numbers-mode<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">random-theme</span> <span style="color: #E27E8D;">(</span>light-theme-list dark-theme-list<span style="color: #E27E8D;">)</span>
  <span style="color: #707b86;">"Choose a random theme from the appropriate list based on the current time"</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">let*</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>now <span style="color: #33CED8;">(</span>decode-time<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
         <span style="color: #B62D65;">(</span>themes <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">if</span> <span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">and</span> <span style="color: #E27E8D;">(</span>&gt;= <span style="color: #8BD49C;">(</span>nth 2 now<span style="color: #8BD49C;">)</span> 10<span style="color: #E27E8D;">)</span> <span style="color: #E27E8D;">(</span>&lt; <span style="color: #8BD49C;">(</span>nth 2 now<span style="color: #8BD49C;">)</span> 15<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
                     light-theme-list
                   dark-theme-list<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>nth <span style="color: #B62D65;">(</span>random <span style="color: #33CED8;">(</span>length themes<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span> themes<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">load-next-favorite-theme</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Switch to a random theme appropriate for the current time."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>theme <span style="color: #33CED8;">(</span>random-theme light-theme-list dark-theme-list<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>load-theme theme t<span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>message <span style="color: #539AFC;">"Switched to theme: %s"</span> theme<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Main%20Global%20Keymap" class="outline-3">
<h3 id="Main%20Global%20Keymap">Main Global Keymap</h3>
<div class="outline-text-3" id="text-Main%20Global%20Keymap">
<p>
These are all under SPACE, following the Spacemacs pattern.
Yeah, my configuration is a little of Spacemacs, a little of Doom, and a little of whatever I feel inspired by.
</p>

<p>
These keybindings are probably the most opinionated part of my configuration. They're shortcuts I can remember, logically or not.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">define the spacebar as the global leader key, following the</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">Spacemacs pattern, which I've been using since 2014</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">general-create-definer</span> my-leader-def
  <span style="color: #5EC4FF;">:prefix</span> <span style="color: #539AFC;">"SPC"</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">define SPC m for minor mode keys, even though I use , sometimes</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">general-create-definer</span> my-local-leader-def
  <span style="color: #5EC4FF;">:prefix</span> <span style="color: #539AFC;">"SPC m"</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">global keybindings with LEADER</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">my-leader-def</span> 'normal 'override
  <span style="color: #539AFC;">"aa"</span>     'ace-jump-mode
  <span style="color: #539AFC;">"ag"</span>     'org-agenda
  <span style="color: #539AFC;">"bb"</span>     'helm-buffers-list
  <span style="color: #539AFC;">"TAB"</span>    #'switch-to-prev-buffer
  <span style="color: #539AFC;">"br"</span>     'revert-buffer
  <span style="color: #539AFC;">"bd"</span>     'evil-delete-buffer
  <span style="color: #539AFC;">"ds"</span>     <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">isw-desktop-save</span> <span style="color: #8BD49C;">()</span>
             <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #8BD49C;">)</span>
             <span style="color: #8BD49C;">(</span>desktop-save <span style="color: #539AFC;">"~/desktop-saves"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #539AFC;">"dr"</span>     <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">isw-desktop-read</span> <span style="color: #8BD49C;">()</span>
             <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #8BD49C;">)</span>
             <span style="color: #8BD49C;">(</span>desktop-read <span style="color: #539AFC;">"~/desktop-saves"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #539AFC;">"cc"</span>     'projectile-compile-project
  <span style="color: #539AFC;">"ec"</span>     'flycheck-clear
  <span style="color: #539AFC;">"el"</span>     'flycheck-list-errors
  <span style="color: #539AFC;">"en"</span>     'flycheck-next-error
  <span style="color: #539AFC;">"ep"</span>     'flycheck-previous-error
  <span style="color: #539AFC;">"Fm"</span>     'make-frame
  <span style="color: #539AFC;">"Ff"</span>     'toggle-frame-fullscreen
  <span style="color: #539AFC;">"ff"</span>     'helm-find-files
  <span style="color: #539AFC;">"fr"</span>     'helm-recentf
  <span style="color: #539AFC;">"fd"</span>     'dired
  <span style="color: #539AFC;">"fed"</span>    'find-initfile
  <span style="color: #539AFC;">"feD"</span>    'find-initfile-other-frame
  <span style="color: #539AFC;">"feR"</span>    'reload-initfile
  <span style="color: #539AFC;">"gb"</span>     'magit-blame
  <span style="color: #539AFC;">"gs"</span>     'magit-status
  <span style="color: #539AFC;">"gg"</span>     'magit
  <span style="color: #539AFC;">"gt"</span>     'git-timemachine
  <span style="color: #539AFC;">"gd"</span>     'magit-diff
  <span style="color: #539AFC;">"go"</span>     'browse-at-remote
  <span style="color: #539AFC;">"gi"</span>     'helm-imenu
  <span style="color: #539AFC;">"h"</span>      'hyperbole
  <span style="color: #539AFC;">"jj"</span>     'bookmark-jump
  <span style="color: #539AFC;">"js"</span>     'bookmark-set
  <span style="color: #539AFC;">"jo"</span>     'org-babel-tangle-jump-to-org
  <span style="color: #539AFC;">"ic"</span>     'insert-char
  <span style="color: #539AFC;">"is"</span>     'yas-insert-snippet
  <span style="color: #539AFC;">"n"</span>      '<span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">:keymap</span> narrow-map<span style="color: #E27E8D;">)</span>
  <span style="color: #539AFC;">"oo"</span>     'browse-url-at-point
  <span style="color: #539AFC;">"p"</span>      'projectile-command-map
  <span style="color: #539AFC;">"pf"</span>     'helm-projectile-find-file
  <span style="color: #539AFC;">"p!"</span>     'projectile-run-async-shell-command-in-root
  <span style="color: #539AFC;">"si"</span>     'yas-insert-snippet
  <span style="color: #539AFC;">"sn"</span>     'yas-new-snippet
  <span style="color: #539AFC;">"sp"</span>     'helm-projectile-ag
  <span style="color: #539AFC;">"qq"</span>     'save-buffers-kill-terminal
  <span style="color: #539AFC;">"qr"</span>     'restart-emacs
  <span style="color: #539AFC;">"qz"</span>     'delete-frame
  <span style="color: #539AFC;">"ta"</span>     'treemacs-add-project-to-workspace
  <span style="color: #539AFC;">"thr"</span>    'load-random-theme
  <span style="color: #539AFC;">"thl"</span>    'choose-theme
  <span style="color: #539AFC;">"thn"</span>    'load-next-favorite-theme
  <span style="color: #539AFC;">"tl"</span>     'toggle-ligatures
  <span style="color: #539AFC;">"tnn"</span>    'display-line-numbers-mode
  <span style="color: #539AFC;">"tnt"</span>    'toggle-line-numbers-rel-abs
  <span style="color: #539AFC;">"tr"</span>     'treemacs-select-window
  <span style="color: #539AFC;">"ts"</span>     'toggle-screaming
  <span style="color: #539AFC;">"tt"</span>     'toggle-transparency
  <span style="color: #539AFC;">"tp"</span>     <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">toggle-prism</span> <span style="color: #8BD49C;">()</span> <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #8BD49C;">)</span> <span style="color: #8BD49C;">(</span>prism-mode 'toggle<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #539AFC;">"tw"</span>     'whitespace-mode
  <span style="color: #539AFC;">"w-"</span>     'split-window-below
  <span style="color: #539AFC;">"w/"</span>     'split-window-right
  <span style="color: #539AFC;">"wb"</span>     'last-window
  <span style="color: #539AFC;">"wj"</span>     'evil-window-down
  <span style="color: #539AFC;">"wk"</span>     'evil-window-up
  <span style="color: #539AFC;">"wh"</span>     'evil-window-left
  <span style="color: #539AFC;">"wl"</span>     'evil-window-right
  <span style="color: #539AFC;">"wd"</span>     'delete-window
  <span style="color: #539AFC;">"wD"</span>     'delete-other-windows
  <span style="color: #539AFC;">"ww"</span>     'ace-window
  <span style="color: #539AFC;">"wo"</span>     'other-window
  <span style="color: #539AFC;">"w="</span>     'balance-windows
  <span style="color: #539AFC;">"W"</span>      '<span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">:keymap</span> evil-window-map<span style="color: #E27E8D;">)</span>
  <span style="color: #539AFC;">"SPC"</span>    'helm-M-x
  <span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">global VISUAL mode map</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">general-vmap</span>
  <span style="color: #539AFC;">";"</span> 'comment-or-uncomment-region<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">top right button on my trackball is equivalent to click (select) +</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">RET (open) on files in Treemacs</span>
<span style="color: #5EC4FF;">(</span>general-define-key
   <span style="color: #5EC4FF;">:keymaps</span> 'treemacs-mode-map
   <span style="color: #539AFC;">"&lt;mouse-8&gt;"</span> 'treemacs-RET-action<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-Org%20Mode%20Settings" class="outline-2">
<h2 id="Org%20Mode%20Settings">Org Mode Settings</h2>
<div class="outline-text-2" id="text-Org%20Mode%20Settings">
<p>
Some default evil bindings
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">evil-org</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Image drag-and-drop for org-mode
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">org-download</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<div id="orgfb9add4" class="figure">
<p><img src="My_Environment/2019-12-25_00-33-07_Peek%25202019-12-25%252000-29.gif" alt="2019-12-25_00-33-07_Peek%25202019-12-25%252000-29.gif" />
</p>
</div>

<p>
Autocomplete for Org blocks (like source blocks)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">company-org-block</span><span style="color: #5EC4FF;">)</span> <span style="color: #41505E;">;; </span><span style="color: #41505E;">TODO configuration</span>
</pre>
</div>

<p>
JIRA support in Org
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">ox-jira</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Install some tools for archiving web content into Org
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">org-web-tools</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> org-export-coding-system 'utf-8<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">Fontify the whole line for headings (with a background color).</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> org-fontify-whole-heading-line t<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">disable the weird default editing window layout in org-mode</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">instead, just replace the current window with the editing one..</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> org-src-window-setup 'current-window<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">indent and wrap long lines in Org</span>
<span style="color: #5EC4FF;">(</span>add-hook 'org-mode-hook 'org-indent-mode<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-hook 'org-mode-hook 'visual-line-mode<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">enable execution of languages from Babel</span>
<span style="color: #5EC4FF;">(</span>org-babel-do-load-languages 'org-babel-load-languages
                             '<span style="color: #E27E8D;">(</span>
                               <span style="color: #8BD49C;">(</span>shell . t<span style="color: #8BD49C;">)</span>
                               <span style="color: #E27E8D;">)</span>
                             <span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">my-local-leader-def</span>
  <span style="color: #5EC4FF;">:states</span>  'normal
  <span style="color: #5EC4FF;">:keymaps</span> 'org-mode-map
  <span style="color: #539AFC;">"y"</span>      'org-store-link
  <span style="color: #539AFC;">"p"</span>      'org-insert-link
  <span style="color: #539AFC;">"x"</span>      'org-babel-execute-src-block
  <span style="color: #539AFC;">"s"</span>      'org-insert-structure-template
  <span style="color: #539AFC;">"e"</span>      'org-edit-src-code
  <span style="color: #539AFC;">"t"</span>      'org-babel-tangle
  <span style="color: #539AFC;">"o"</span>      'org-export-dispatch
  <span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>general-define-key
 <span style="color: #5EC4FF;">:states</span>  'normal
 <span style="color: #5EC4FF;">:keymaps</span> 'org-mode-map
 <span style="color: #539AFC;">"TAB"</span>    'evil-toggle-fold<span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">github-flavored markdown</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">ox-gfm</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">htmlize prints the current buffer or file, as it would appear in</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">Emacs, but in HTML! It's super cool and TODO I need to move this</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">use-package statement somewhere I can talk about htmlize outside of</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">a comment</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">htmlize</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">enable markdown export</span>
<span style="color: #5EC4FF;">(</span>eval-after-load <span style="color: #539AFC;">"org"</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">progn</span>
    '<span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">ox-md</span> nil t<span style="color: #8BD49C;">)</span>
    '<span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">ox-gfm</span> nil t<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">todo states</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> org-todo-keywords
      '<span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>sequence <span style="color: #539AFC;">"TODO(t)"</span> <span style="color: #539AFC;">"|"</span> <span style="color: #539AFC;">"IN PROGRESS(p)"</span> <span style="color: #539AFC;">"|"</span> <span style="color: #539AFC;">"DONE(d)"</span><span style="color: #8BD49C;">)</span>
        <span style="color: #8BD49C;">(</span>sequence <span style="color: #539AFC;">"QUESTION(q)"</span> <span style="color: #539AFC;">"|"</span> <span style="color: #539AFC;">"ANSWERED(a)"</span><span style="color: #8BD49C;">)</span>
        <span style="color: #8BD49C;">(</span>sequence <span style="color: #539AFC;">"AGENDA(a)"</span> <span style="color: #539AFC;">"|"</span> <span style="color: #539AFC;">"DONE(d)"</span> <span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #41505E;">;; </span><span style="color: #41505E;">enable org-protocol</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">org-protocol</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>

<div id="outline-container-Use%20a%20variable-pitch%20font%20in%20Org-Mode" class="outline-4">
<h4 id="Use%20a%20variable-pitch%20font%20in%20Org-Mode">Use a variable-pitch font in Org-Mode</h4>
<div class="outline-text-4" id="text-Use%20a%20variable-pitch%20font%20in%20Org-Mode">
<p>
Org is mostly prose and prose should be read in a variable-pitch font where possible.
This changes fonts in Org to be variable-pitch where it makes sense
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>add-hook 'org-mode-hook 'variable-pitch-mode<span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Inside of code blocks I want a fixed-pitch font
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">ian-org-fixed-pitch</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #707b86;">"Fix fixed pitch text in Org Mode"</span>
  <span style="color: #E27E8D;">(</span>set-face-attribute 'org-table nil <span style="color: #5EC4FF;">:inherit</span> 'fixed-pitch<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>set-face-attribute 'org-block nil <span style="color: #5EC4FF;">:inherit</span> 'fixed-pitch<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>add-hook 'org-mode-hook 'ian-org-fixed-pitch<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Useful%20anchors%20in%20HTML%20export" class="outline-4">
<h4 id="Useful%20anchors%20in%20HTML%20export">Useful anchors in HTML export</h4>
<div class="outline-text-4" id="text-Useful%20anchors%20in%20HTML%20export">
<p>
This is taken from <a href="https://github.com/alphapapa/unpackaged.el#export-to-html-with-useful-anchors">github.com/alphapapa's Unpackaged.el</a> collection, unmodified.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">eval-when-compile</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">easy-mmode</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">ox</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">define-minor-mode</span> <span style="color: #33CED8;">unpackaged/org-export-html-with-useful-ids-mode</span>
  <span style="color: #707b86;">"Attempt to export Org as HTML with useful link IDs.</span>
<span style="color: #707b86;">Instead of random IDs like \"#orga1b2c3\", use heading titles,</span>
<span style="color: #707b86;">made unique when necessary."</span>
  <span style="color: #5EC4FF;">:global</span> t
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">if</span> unpackaged/org-export-html-with-useful-ids-mode
      <span style="color: #8BD49C;">(</span>advice-add #'org-export-get-reference <span style="color: #5EC4FF;">:override</span> #'unpackaged/org-export-get-reference<span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>advice-remove #'org-export-get-reference #'unpackaged/org-export-get-reference<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">unpackaged/org-export-get-reference</span> <span style="color: #E27E8D;">(</span>datum info<span style="color: #E27E8D;">)</span>
  <span style="color: #707b86;">"Like `</span><span style="color: #E27E8D;">org-export-get-reference</span><span style="color: #707b86;">', except uses heading titles instead of random numbers."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>cache <span style="color: #33CED8;">(</span>plist-get info <span style="color: #5EC4FF;">:internal-references</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">or</span> <span style="color: #B62D65;">(</span>car <span style="color: #33CED8;">(</span>rassq datum cache<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
        <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">let*</span> <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">(</span>crossrefs <span style="color: #E27E8D;">(</span>plist-get info <span style="color: #5EC4FF;">:crossrefs</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
               <span style="color: #5EC4FF;">(</span>cells <span style="color: #E27E8D;">(</span>org-export-search-cells datum<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">Preserve any pre-existing association between</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">a search cell and a reference, i.e., when some</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">previously published document referenced a location</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">within current file (see</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">`</span><span style="color: #E27E8D;">org-publish-resolve-external-link</span><span style="color: #41505E;">').</span>
               <span style="color: #41505E;">;;</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">However, there is no guarantee that search cells are</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">unique, e.g., there might be duplicate custom ID or</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">two headings with the same title in the file.</span>
               <span style="color: #41505E;">;;</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">As a consequence, before re-using any reference to</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">an element or object, we check that it doesn't refer</span>
               <span style="color: #41505E;">;; </span><span style="color: #41505E;">to a previous element or object.</span>
               <span style="color: #5EC4FF;">(</span>new <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">or</span> <span style="color: #8BD49C;">(</span>cl-some
                         <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">lambda</span> <span style="color: #5EC4FF;">(</span>cell<span style="color: #5EC4FF;">)</span>
                           <span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>stored <span style="color: #B62D65;">(</span>cdr <span style="color: #33CED8;">(</span>assoc cell crossrefs<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
                             <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">when</span> stored
                               <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #B62D65;">(</span><span style="color: #33CED8;">(</span>old <span style="color: #5EC4FF;">(</span>org-export-format-reference stored<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
                                 <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">and</span> <span style="color: #33CED8;">(</span>not <span style="color: #5EC4FF;">(</span>assoc old cache<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span> stored<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span><span style="color: #B62D65;">)</span>
                         cells<span style="color: #8BD49C;">)</span>
                        <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">when</span> <span style="color: #B62D65;">(</span>org-element-property <span style="color: #5EC4FF;">:raw-value</span> datum<span style="color: #B62D65;">)</span>
                          <span style="color: #41505E;">;; </span><span style="color: #41505E;">Heading with a title</span>
                          <span style="color: #B62D65;">(</span>unpackaged/org-export-new-title-reference datum cache<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
                        <span style="color: #41505E;">;; </span><span style="color: #41505E;">NOTE: This probably breaks some Org Export</span>
                        <span style="color: #41505E;">;; </span><span style="color: #41505E;">feature, but if it does what I need, fine.</span>
                        <span style="color: #8BD49C;">(</span>org-export-format-reference
                         <span style="color: #B62D65;">(</span>org-export-new-reference cache<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
               <span style="color: #5EC4FF;">(</span>reference-string new<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">Cache contains both data already associated to</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">a reference and in-use internal references, so as to make</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">unique references.</span>
          <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">dolist</span> <span style="color: #5EC4FF;">(</span>cell cells<span style="color: #5EC4FF;">)</span> <span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">push</span> <span style="color: #E27E8D;">(</span>cons cell new<span style="color: #E27E8D;">)</span> cache<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">Retain a direct association between reference string and</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">DATUM since (1) not every object or element can be given</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">a search cell (2) it permits quick lookup.</span>
          <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">push</span> <span style="color: #5EC4FF;">(</span>cons reference-string datum<span style="color: #5EC4FF;">)</span> cache<span style="color: #33CED8;">)</span>
          <span style="color: #33CED8;">(</span>plist-put info <span style="color: #5EC4FF;">:internal-references</span> cache<span style="color: #33CED8;">)</span>
          reference-string<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">unpackaged/org-export-new-title-reference</span> <span style="color: #E27E8D;">(</span>datum cache<span style="color: #E27E8D;">)</span>
  <span style="color: #707b86;">"Return new reference for DATUM that is unique in CACHE."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">cl-macrolet</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>inc-suffixf <span style="color: #33CED8;">(</span>place<span style="color: #33CED8;">)</span>
                             `<span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">progn</span>
                                <span style="color: #5EC4FF;">(</span>string-match <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">rx</span> bos
                                                  <span style="color: #8BD49C;">(</span>minimal-match <span style="color: #B62D65;">(</span>group <span style="color: #5EC4FF;">(</span>1+ anything<span style="color: #5EC4FF;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
                                                  <span style="color: #8BD49C;">(</span>optional <span style="color: #539AFC;">"--"</span> <span style="color: #B62D65;">(</span>group <span style="color: #5EC4FF;">(</span>1+ digit<span style="color: #5EC4FF;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
                                                  eos<span style="color: #E27E8D;">)</span>
                                              ,place<span style="color: #5EC4FF;">)</span>
                                <span style="color: #41505E;">;; </span><span style="color: #41505E;">HACK: `</span><span style="color: #E27E8D;">s1</span><span style="color: #41505E;">' instead of a gensym.</span>
                                <span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">-let*</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>s1 suffix<span style="color: #B62D65;">)</span> <span style="color: #B62D65;">(</span>list <span style="color: #5EC4FF;">(</span>match-string 1 ,place<span style="color: #5EC4FF;">)</span>
                                                           <span style="color: #5EC4FF;">(</span>match-string 2 ,place<span style="color: #5EC4FF;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
                                        <span style="color: #8BD49C;">(</span>suffix <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">if</span> suffix
                                                    <span style="color: #5EC4FF;">(</span>string-to-number suffix<span style="color: #5EC4FF;">)</span>
                                                  0<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
                                  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setf</span> ,place <span style="color: #8BD49C;">(</span>format <span style="color: #539AFC;">"%s--%s"</span> s1 <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">cl-incf</span> suffix<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">let*</span> <span style="color: #B62D65;">(</span><span style="color: #33CED8;">(</span>title <span style="color: #5EC4FF;">(</span>org-element-property <span style="color: #5EC4FF;">:raw-value</span> datum<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span>
           <span style="color: #33CED8;">(</span>ref <span style="color: #5EC4FF;">(</span>url-hexify-string <span style="color: #E27E8D;">(</span>substring-no-properties title<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span>
           <span style="color: #33CED8;">(</span>parent <span style="color: #5EC4FF;">(</span>org-element-property <span style="color: #5EC4FF;">:parent</span> datum<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
      <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">while</span> <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">--any</span> <span style="color: #5EC4FF;">(</span>equal ref <span style="color: #E27E8D;">(</span>car it<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
                    cache<span style="color: #33CED8;">)</span>
        <span style="color: #41505E;">;; </span><span style="color: #41505E;">Title not unique: make it so.</span>
        <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">if</span> parent
            <span style="color: #41505E;">;; </span><span style="color: #41505E;">Append ancestor title.</span>
            <span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setf</span> title <span style="color: #E27E8D;">(</span>concat <span style="color: #8BD49C;">(</span>org-element-property <span style="color: #5EC4FF;">:raw-value</span> parent<span style="color: #8BD49C;">)</span>
                                <span style="color: #539AFC;">"--"</span> title<span style="color: #E27E8D;">)</span>
                  ref <span style="color: #E27E8D;">(</span>url-hexify-string <span style="color: #8BD49C;">(</span>substring-no-properties title<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
                  parent <span style="color: #E27E8D;">(</span>org-element-property <span style="color: #5EC4FF;">:parent</span> parent<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">No more ancestors: add and increment a number.</span>
          <span style="color: #5EC4FF;">(</span>inc-suffixf ref<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
      ref<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>add-hook 'org-mode-hook 'unpackaged/org-export-html-with-useful-ids-mode<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-Miscellaneous%20standalone%20global%20configuration%20changes" class="outline-2">
<h2 id="Miscellaneous%20standalone%20global%20configuration%20changes">Miscellaneous standalone global configuration changes</h2>
<div class="outline-text-2" id="text-Miscellaneous%20standalone%20global%20configuration%20changes">
</div>
<div id="outline-container-Opening%20the%20Remote%20Repo%20in%20the%20Browser%20from%20Emacs" class="outline-3">
<h3 id="Opening%20the%20Remote%20Repo%20in%20the%20Browser%20from%20Emacs">Opening the Remote Repo in the Browser from Emacs</h3>
<div class="outline-text-3" id="text-Opening%20the%20Remote%20Repo%20in%20the%20Browser%20from%20Emacs">
<p>
<a href="https://github.com/rmuslimov/browse-at-remote">browse-at-remote.el</a> solves this
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">browse-at-remote</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Opening%20Sources%20Directly%20in%20Emacs%20from%20the%20Browser" class="outline-3">
<h3 id="Opening%20Sources%20Directly%20in%20Emacs%20from%20the%20Browser">Opening Sources Directly in Emacs from the Browser</h3>
<div class="outline-text-3" id="text-Opening%20Sources%20Directly%20in%20Emacs%20from%20the%20Browser">
<p>
<a href="https://orgmode.org/worg/org-contrib/org-protocol.html">https://orgmode.org/worg/org-contrib/org-protocol.html</a>
</p>

<p>
First use this <code>.desktop</code> file to register a handler for the new protocol scheme:
</p>
<div class="org-src-container">
<pre class="src src-conf">[<span style="color: #EBBF83;">Desktop Entry</span>]
<span style="color: #718CA1;">Name</span>=org-protocol
<span style="color: #718CA1;">Comment</span>=Intercept calls from emacsclient to trigger custom actions
<span style="color: #718CA1;">Categories</span>=Other;
<span style="color: #718CA1;">Keywords</span>=org-protocol;
<span style="color: #718CA1;">Icon</span>=emacs
<span style="color: #718CA1;">Type</span>=Application
<span style="color: #718CA1;">Exec</span>=/home/ian/bin/org-protocol %u
<span style="color: #41505E;">#</span><span style="color: #41505E;">Exec=emacsclient -- %u</span>
<span style="color: #718CA1;">Terminal</span>=false
<span style="color: #718CA1;">StartupWMClass</span>=Emacs
<span style="color: #718CA1;">MimeType</span>=x-scheme-handler/org-protocol;
</pre>
</div>

<p>
After tangling that file to its destination, run the following command to update the database:
</p>
<pre class="example">
update-desktop-database ~/.local/share/applications/
</pre>


<p>
Add the custom <code>org-protocol</code> script to intercept calls from the browser, do any necessary pre-processing, and hand off the corrected input to <code>emacsclient</code>:
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #41505E;"># for some reason the bookmarklet strips a colon, so use sed to remove</span>
<span style="color: #41505E;"># the botched prefix and rebuild it correctly</span>
<span style="color: #5EC4FF; font-weight: bold;">emacsclient</span> <span style="color: #E27E8D;">--</span> org-protocol://open-source://<span style="color: #5EC4FF;">$(</span><span style="color: #5EC4FF; font-weight: bold;">echo "$@" | sed 's#org-protocol://open-source//##g'</span><span style="color: #5EC4FF;">)</span> <span style="color: #5EC4FF;">|</span> <span style="color: #5EC4FF; font-weight: bold;">tee</span> /tmp/xdg-emacsclient
<span style="color: #41505E;"># that's probably a useless call to echo but whatever</span>
</pre>
</div>

<p>
For now this is extremely rudimentary and I will improve it as needed.
</p>
</div>

<ul class="org-ul">
<li><a id="Manual%20Steps%3A"></a>Manual Steps:<br />
<div class="outline-text-5" id="text-Manual%20Steps%3A">
<ol class="org-ol">
<li>The first time, add a button in the browser by creating a bookmarklet containing the following target:</li>
</ol>
<pre class="example">
javascript:location.href='org-protocol://open-source://'+encodeURIComponent(location.href)
</pre>


<ol class="org-ol">
<li>Add an entry to <code>org-protocol-project-alist</code>, defined in the local machine's hostname-specific config found in <code>local/</code>. An example can be found on the Worg page above, but here it is again for easy reference:</li>
</ol>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> org-protocol-project-alist
      '<span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"Worg"</span>
         <span style="color: #5EC4FF;">:base-url</span> <span style="color: #539AFC;">"https://orgmode.org/worg/"</span>
         <span style="color: #5EC4FF;">:working-directory</span> <span style="color: #539AFC;">"/home/user/worg/"</span>
         <span style="color: #5EC4FF;">:online-suffix</span> <span style="color: #539AFC;">".html"</span>
         <span style="color: #5EC4FF;">:working-suffix</span> <span style="color: #539AFC;">".org"</span><span style="color: #8BD49C;">)</span>
        <span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"My local Org-notes"</span>
         <span style="color: #5EC4FF;">:base-url</span> <span style="color: #539AFC;">"http://localhost/org/"</span>
         <span style="color: #5EC4FF;">:working-directory</span> <span style="color: #539AFC;">"/home/user/org/"</span>
         <span style="color: #5EC4FF;">:online-suffix</span> <span style="color: #539AFC;">".php"</span>
         <span style="color: #5EC4FF;">:working-suffix</span> <span style="color: #539AFC;">".org"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
N.B. this code block does <b><b>not</b></b> get tangled into <code>ian.el</code>.
</p>
</div>
</li>
</ul>
</div>

<div id="outline-container-TRAMP%20settings" class="outline-3">
<h3 id="TRAMP%20settings">TRAMP settings</h3>
<div class="outline-text-3" id="text-TRAMP%20settings">
<p>
Only one setting at the moment: use <code>ssh</code> instead of <code>scp</code> when accessing files with <code>ssh:</code> schemes
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> tramp-default-method <span style="color: #539AFC;">"ssh"</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Disable%20most%20warnings" class="outline-3">
<h3 id="Disable%20most%20warnings">Disable most warnings</h3>
<div class="outline-text-3" id="text-Disable%20most%20warnings">
<p>
Honestly I'm not good enough at Emacs to make sense of most of them anyway
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> warning-minimum-level <span style="color: #5EC4FF;">:emergency</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Switch%20Theme" class="outline-3">
<h3 id="Switch%20Theme">Switch Theme</h3>
<div class="outline-text-3" id="text-Switch%20Theme">
<p>
Automatically calls disable-theme on the current theme before loading a new theme! Allows easy theme switching with just <code>M-x load-theme</code>.
</p>

<p>
Thanks to <a href="https://www.simplify.ba/articles/2016/02/13/loading-and-unloading-emacs-themes/">https://www.simplify.ba/articles/2016/02/13/loading-and-unloading-emacs-themes/</a>.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">load-theme--disable-old-theme</span> <span style="color: #E27E8D;">(</span>theme <span style="color: #EBBF83;">&amp;rest</span> args<span style="color: #E27E8D;">)</span>
  <span style="color: #707b86;">"Disable current theme before loading new one."</span>
  <span style="color: #E27E8D;">(</span>mapcar #'disable-theme custom-enabled-themes<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>advice-add 'load-theme <span style="color: #5EC4FF;">:before</span> #'load-theme--disable-old-theme<span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
Save the current theme to a global variable so it can be referenced later
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">load-theme--save-new-theme</span> <span style="color: #E27E8D;">(</span>theme <span style="color: #EBBF83;">&amp;rest</span> args<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> ian-current-theme theme<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>advice-add 'load-theme <span style="color: #5EC4FF;">:before</span> #'load-theme--save-new-theme<span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
There are a few occasions where the Org fixed-width fonts don't get reapplied correctly. This solves most of them, and eventually I may iterate on it, if the edge cases bother me enough.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">ian-restart-org-advice</span> <span style="color: #E27E8D;">(</span><span style="color: #EBBF83;">&amp;rest</span> _args<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>org-mode-restart<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>advice-add 'load-theme <span style="color: #5EC4FF;">:after</span> #'ian-restart-org-advice<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Line%20Numbers%20in%20Programming%20Buffers" class="outline-3">
<h3 id="Line%20Numbers%20in%20Programming%20Buffers">Line Numbers in Programming Buffers</h3>
<div class="outline-text-3" id="text-Line%20Numbers%20in%20Programming%20Buffers">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>add-hook 'prog-mode-hook 'display-line-numbers-mode<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> display-line-numbers-type 'relative<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Transparency%20toggle" class="outline-3">
<h3 id="Transparency%20toggle">Transparency toggle</h3>
<div class="outline-text-3" id="text-Transparency%20toggle">
<p>
I definitely lifted this from somewhere but failed to document where I got it :\
Probably from Spacemacs. Thanks, Spacemacs.
</p>


<div id="orgf210ba1" class="figure">
<p><img src="My_Environment/2020-05-18_21-46-59_2020-05-18T21:46:03.gif" alt="2020-05-18_21-46-59_2020-05-18T21:46:03.gif" />
</p>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">toggle-transparency</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>alpha <span style="color: #33CED8;">(</span>frame-parameter nil 'alpha<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>set-frame-parameter
     nil 'alpha
     <span style="color: #B62D65;">(</span><span style="color: #5EC4FF;">if</span> <span style="color: #33CED8;">(</span>eql <span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">cond</span> <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>numberp alpha<span style="color: #8BD49C;">)</span> alpha<span style="color: #E27E8D;">)</span>
                    <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>numberp <span style="color: #B62D65;">(</span>cdr alpha<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span> <span style="color: #8BD49C;">(</span>cdr alpha<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
                    <span style="color: #41505E;">;; </span><span style="color: #41505E;">Also handle undocumented (&lt;active&gt; &lt;inactive&gt;) form.</span>
                    <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>numberp <span style="color: #B62D65;">(</span>cadr alpha<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span> <span style="color: #8BD49C;">(</span>cadr alpha<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
              100<span style="color: #33CED8;">)</span>
         '95 '<span style="color: #33CED8;">(</span>100 . 100<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Switch%20to%20last%20buffer" class="outline-3">
<h3 id="Switch%20to%20last%20buffer">Switch to last buffer</h3>
<div class="outline-text-3" id="text-Switch%20to%20last%20buffer">
<p>
This one lifted from <a href="https://emacsredux.com/blog/2013/04/28/switch-to-previous-buffer/">https://emacsredux.com/blog/2013/04/28/switch-to-previous-buffer/</a>
</p>

<p>
TODO: Make this behave like alt-tab in Windows, but for buffers. I think <code>hycontrol</code> may come in handy (Hyperbole).
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">er-switch-to-previous-buffer</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #E27E8D;">(</span>concat
    <span style="color: #539AFC;">"Switch to previously open buffer."</span>
    <span style="color: #539AFC;">"Repeated invocations toggle between the two most recently open buffers."</span><span style="color: #E27E8D;">)</span>
    <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
    <span style="color: #E27E8D;">(</span>switch-to-buffer <span style="color: #8BD49C;">(</span>other-buffer <span style="color: #B62D65;">(</span>current-buffer<span style="color: #B62D65;">)</span> 1<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Fix%20Home%2FEnd%20keys" class="outline-3">
<h3 id="Fix%20Home%2FEnd%20keys">Fix Home/End keys</h3>
<div class="outline-text-3" id="text-Fix%20Home%2FEnd%20keys">
<p>
Emacs has weird behavior by default for Home and End and this change makes the behavior "normal" again.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>global-set-key <span style="color: #E27E8D;">(</span>kbd <span style="color: #539AFC;">"&lt;home&gt;"</span><span style="color: #E27E8D;">)</span> 'move-beginning-of-line<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>global-set-key <span style="color: #E27E8D;">(</span>kbd <span style="color: #539AFC;">"&lt;end&gt;"</span><span style="color: #E27E8D;">)</span> 'move-end-of-line<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Customize%20the%20frame%20%28OS%20window%29%20title" class="outline-3">
<h3 id="Customize%20the%20frame%20%28OS%20window%29%20title">Customize the frame (OS window) title</h3>
<div class="outline-text-3" id="text-Customize%20the%20frame%20%28OS%20window%29%20title">
<p>
Taken from StackOverflow, at least for now, which does 90% of what I want and can serve as a future reference of how to customize this aspect of Emacs. This displays the file name and major mode in the OS title bar. Will have to find the documentation that defines the format string passed to <code>frame-title-format</code> at some point.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq-default</span> frame-title-format '<span style="color: #E27E8D;">(</span><span style="color: #539AFC;">"%f [%m]"</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Tweak%20align-regexp" class="outline-3">
<h3 id="Tweak%20align-regexp">Tweak align-regexp</h3>
<div class="outline-text-3" id="text-Tweak%20align-regexp">
<p>
Configure align-regexp to use spaces instead of tabs. This is mostly for this file. When my keybindings are in two columns and <code>M-x align-regexp</code> uses tabs, the columns look aligned in Emacs but unaligned on GitHub. Using spaces faces this. This snippet effects that change.
</p>

<p>
Lifted from StackOverflow:
</p>

<p>
<a href="https://stackoverflow.com/questions/22710040/emacs-align-regexp-with-spaces-instead-of-tabs">https://stackoverflow.com/questions/22710040/emacs-align-regexp-with-spaces-instead-of-tabs</a>
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defadvice</span> <span style="color: #33CED8;">align-regexp</span> <span style="color: #E27E8D;">(</span>around align-regexp-with-spaces activate<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>indent-tabs-mode nil<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    ad-do-it<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Configure%20automatic%20backups%2Frecovery%20files" class="outline-3">
<h3 id="Configure%20automatic%20backups%2Frecovery%20files">Configure automatic backups/recovery files</h3>
<div class="outline-text-3" id="text-Configure%20automatic%20backups%2Frecovery%20files">
<p>
I don't like how Emacs puts temp files in the same directory as the file, as this litters the current working directory and makes git branches dirty. These are some tweaks to store those files in <code>/tmp</code>.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> backup-directory-alist `<span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span><span style="color: #539AFC;">"."</span> . <span style="color: #539AFC;">"/tmp/.emacs-saves"</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> backup-by-copying t<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> delete-old-versions t<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Clean%20whitespace%20on%20save%20in%20all%20modes" class="outline-3">
<h3 id="Clean%20whitespace%20on%20save%20in%20all%20modes"><span class="todo TODO">TODO</span> Clean whitespace on save in all modes</h3>
<div class="outline-text-3" id="text-Clean%20whitespace%20on%20save%20in%20all%20modes">
<p>
I have to actually go in and configure this because the defaults keep giving me fucking heartburn.
It keeps messing with the whitespace in files that are none of its business. Maybe I just need to carefully enable it for certain modes? idk, too much magic, no time to look into it right now.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">(add-hook 'before-save-hook 'whitespace-cleanup)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Autosave" class="outline-3">
<h3 id="Autosave">Autosave</h3>
<div class="outline-text-3" id="text-Autosave">
<p>
Automatically saves the file when it's been idle for 5 minutes.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">autosave</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> auto-save-visited-interval 300<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>auto-save-visited-mode
 <span style="color: #5EC4FF;">:diminish</span>
 <span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Default%20window%20size" class="outline-3">
<h3 id="Default%20window%20size">Default window size</h3>
<div class="outline-text-3" id="text-Default%20window%20size">
<p>
Just a bigger size that I prefer..
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>add-to-list 'default-frame-alist '<span style="color: #E27E8D;">(</span>width . 128<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-to-list 'default-frame-alist '<span style="color: #E27E8D;">(</span>height . 60<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Unclutter%20global%20modeline" class="outline-3">
<h3 id="Unclutter%20global%20modeline">Unclutter global modeline</h3>
<div class="outline-text-3" id="text-Unclutter%20global%20modeline">
<p>
Some global minor modes put themselves in the modeline and it gets noisy, so remove them from the modeline.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">hide some modes that are everywhere</span>
<span style="color: #5EC4FF;">(</span>diminish 'eldoc-mode<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>diminish 'undo-tree-mode<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>diminish 'auto-revert-mode<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>diminish 'evil-collection-unimpaired-mode<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>diminish 'yas-minor-mode-major-mode<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Less%20annoying%20bell" class="outline-3">
<h3 id="Less%20annoying%20bell">Less annoying bell</h3>
<div class="outline-text-3" id="text-Less%20annoying%20bell">
<p>
Flashes the modeline foreground instead of whatever the horrible default behavior was (I don't even remember).
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> ring-bell-function
      <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">lambda</span> <span style="color: #8BD49C;">()</span>
        <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #B62D65;">(</span><span style="color: #33CED8;">(</span>orig-fg <span style="color: #5EC4FF;">(</span>face-foreground 'mode-line<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">change the flash color here</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">overrides themes :P</span>
          <span style="color: #41505E;">;; </span><span style="color: #41505E;">guess that's one way to do it</span>
          <span style="color: #B62D65;">(</span>set-face-foreground 'mode-line <span style="color: #539AFC;">"#F2804F"</span><span style="color: #B62D65;">)</span>
          <span style="color: #B62D65;">(</span>run-with-idle-timer 0.1 nil
                               <span style="color: #33CED8;">(</span><span style="color: #5EC4FF;">lambda</span> <span style="color: #5EC4FF;">(</span>fg<span style="color: #5EC4FF;">)</span> <span style="color: #5EC4FF;">(</span>set-face-foreground 'mode-line fg<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span>
                               orig-fg<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
<p>
(from Emacs wiki)
</p>
</div>
</div>
<div id="outline-container-Remove%20toolbar%2C%20scrollbars%2C%20and%20menu" class="outline-3">
<h3 id="Remove%20toolbar%2C%20scrollbars%2C%20and%20menu">Remove toolbar, scrollbars, and menu</h3>
<div class="outline-text-3" id="text-Remove%20toolbar%2C%20scrollbars%2C%20and%20menu">
<p>
Removes the toolbar and menu bar (file menu, etc) in Emacs because I just use <code>M-x</code> for everything.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">when</span> <span style="color: #E27E8D;">(</span>fboundp 'menu-bar-mode<span style="color: #E27E8D;">)</span> <span style="color: #E27E8D;">(</span>menu-bar-mode -1<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">when</span> <span style="color: #E27E8D;">(</span>fboundp 'tool-bar-mode<span style="color: #E27E8D;">)</span> <span style="color: #E27E8D;">(</span>tool-bar-mode -1<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>scroll-bar-mode -1<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">my/disable-scroll-bars</span> <span style="color: #E27E8D;">(</span>frame<span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span>modify-frame-parameters frame
                           '<span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>vertical-scroll-bars . nil<span style="color: #B62D65;">)</span>
                             <span style="color: #B62D65;">(</span>horizontal-scroll-bars . nil<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>add-hook 'after-make-frame-functions 'my/disable-scroll-bars<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Enable%20the%20mouse%20in%20the%20terminal" class="outline-3">
<h3 id="Enable%20the%20mouse%20in%20the%20terminal">Enable the mouse in the terminal</h3>
<div class="outline-text-3" id="text-Enable%20the%20mouse%20in%20the%20terminal">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>xterm-mouse-mode 1<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Disable%20%22nice%22%20names%20in%20Customize" class="outline-3">
<h3 id="Disable%20%22nice%22%20names%20in%20Customize">Disable "nice" names in Customize</h3>
<div class="outline-text-3" id="text-Disable%20%22nice%22%20names%20in%20Customize">
<p>
I prefer that Customize display the names of variables that I can change in this file, rather than the human-readable names for people who customize their Emacs through <code>M-x customize</code>
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> custom-unlispify-tag-names nil<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Smart%20formatting%20for%20many%20languages" class="outline-3">
<h3 id="Smart%20formatting%20for%20many%20languages">Smart formatting for many languages</h3>
<div class="outline-text-3" id="text-Smart%20formatting%20for%20many%20languages">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #41505E;">;; </span><span style="color: #41505E;">auto-format different source code files extremely intelligently</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">https://github.com/radian-software/apheleia</span>
<span style="color: #41505E;">;; </span><span style="color: #41505E;">(use-package apheleia</span>
<span style="color: #41505E;">;;   </span><span style="color: #41505E;">:config</span>
<span style="color: #41505E;">;;   </span><span style="color: #41505E;">(apheleia-global-mode +1))</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Add%20support%20for%20browsing%20Gemini-space" class="outline-3">
<h3 id="Add%20support%20for%20browsing%20Gemini-space">Add support for browsing Gemini-space</h3>
<div class="outline-text-3" id="text-Add%20support%20for%20browsing%20Gemini-space">
<p>
Gemini is a new (circa 2019) Gopher-ish hypertext protocol. Browsing in Emacs is nice.
</p>

<p>
Install a browser, elpher..
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">elpher</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
And a mode
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">gemini-mode</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Don%27t%20require%20a%20final%20newline" class="outline-3">
<h3 id="Don%27t%20require%20a%20final%20newline">Don't require a final newline</h3>
<div class="outline-text-3" id="text-Don%27t%20require%20a%20final%20newline">
<p>
Very occasionally this causes problems and it's not something that I actually care about. To be honest I do not know why Emacs has a default behavior where it adds a newline to the end of the file on save.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">setq</span> require-final-newline nil<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Caps%20lock%20mode" class="outline-3">
<h3 id="Caps%20lock%20mode">Caps lock mode</h3>
<div class="outline-text-3" id="text-Caps%20lock%20mode">
<p>
For those of us who did away with the caps lock button but write SQL sometimes
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">use-package</span> <span style="color: #E27E8D;">caps-lock</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-Allow%20swapping%20windows%20with%20ctrl%20%2B%20shift%20%2B%20left-click-drag" class="outline-3">
<h3 id="Allow%20swapping%20windows%20with%20ctrl%20%2B%20shift%20%2B%20left-click-drag">Allow swapping windows with ctrl + shift + left-click-drag</h3>
<div class="outline-text-3" id="text-Allow%20swapping%20windows%20with%20ctrl%20%2B%20shift%20%2B%20left-click-drag">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defvar</span> <span style="color: #718CA1;">window-swap-origin</span> nil<span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">window-swap-start</span> <span style="color: #E27E8D;">(</span>event<span style="color: #E27E8D;">)</span>
  <span style="color: #707b86;">"Start swapping windows using mouse events."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span> <span style="color: #539AFC;">"e"</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> window-swap-origin <span style="color: #8BD49C;">(</span>posn-window <span style="color: #B62D65;">(</span>event-start event<span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">window-swap-end</span> <span style="color: #E27E8D;">(</span>event<span style="color: #E27E8D;">)</span>
  <span style="color: #707b86;">"End swapping windows using mouse events."</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span> <span style="color: #539AFC;">"e"</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #8BD49C;">(</span><span style="color: #B62D65;">(</span>origin window-swap-origin<span style="color: #B62D65;">)</span>
        <span style="color: #B62D65;">(</span>target <span style="color: #33CED8;">(</span>posn-window <span style="color: #5EC4FF;">(</span>event-end event<span style="color: #5EC4FF;">)</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>window-swap-states origin target<span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">setq</span> window-swap-origin nil<span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>

<span style="color: #5EC4FF;">(</span>global-set-key <span style="color: #E27E8D;">(</span>kbd <span style="color: #539AFC;">"&lt;C-S-mouse-1&gt;"</span><span style="color: #E27E8D;">)</span> 'window-swap-start<span style="color: #5EC4FF;">)</span>
<span style="color: #5EC4FF;">(</span>global-set-key <span style="color: #E27E8D;">(</span>kbd <span style="color: #539AFC;">"&lt;C-S-drag-mouse-1&gt;"</span><span style="color: #E27E8D;">)</span> 'window-swap-end<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-Render%20this%20file%20for%20display%20on%20the%20web" class="outline-2">
<h2 id="Render%20this%20file%20for%20display%20on%20the%20web">Render this file for display on the web</h2>
<div class="outline-text-2" id="text-Render%20this%20file%20for%20display%20on%20the%20web">
<p>
This defines a command that will export this file to GitHub flavored Markdown and copy that to README.md so that this file is always the one that appears on the GitHub repository landing page, but in the correct format and everything.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">defun</span> <span style="color: #33CED8;">render-configfile-for-web</span> <span style="color: #E27E8D;">()</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">interactive</span><span style="color: #E27E8D;">)</span>
  <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">when</span> <span style="color: #8BD49C;">(</span>string=
         <span style="color: #B62D65;">(</span>file-name-nondirectory <span style="color: #33CED8;">(</span>buffer-file-name<span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span>
         <span style="color: #539AFC;">"ian.org"</span><span style="color: #8BD49C;">)</span>

    <span style="color: #8BD49C;">(</span>org-html-export-to-html<span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>org-gfm-export-to-markdown<span style="color: #8BD49C;">)</span>

    <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">if</span> <span style="color: #B62D65;">(</span>find-buffer-visiting <span style="color: #539AFC;">"~/.emacs.d/README.md"</span><span style="color: #B62D65;">)</span>
        <span style="color: #B62D65;">(</span>kill-buffer-ask <span style="color: #33CED8;">(</span>find-buffer-visiting <span style="color: #539AFC;">"~/.emacs.d/README.md"</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>

    <span style="color: #8BD49C;">(</span>delete-file <span style="color: #539AFC;">"README.md"</span> t<span style="color: #8BD49C;">)</span>
    <span style="color: #8BD49C;">(</span>rename-file <span style="color: #539AFC;">"ian.md"</span> <span style="color: #539AFC;">"README.md"</span><span style="color: #8BD49C;">)</span>
    <span style="color: #E27E8D;">)</span>
  <span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>

<div id="outline-container-Update%20README.md%20git%20hook" class="outline-3">
<h3 id="Update%20README.md%20git%20hook">Update README.md git hook</h3>
<div class="outline-text-3" id="text-Update%20README.md%20git%20hook">
<p>
Before commit, generate the README.md file from the updated configuration.
</p>
</div>
<div id="outline-container-Figure%20out%20why%20this%20produces%20%22args%20out%20of%20bounds%22%20error" class="outline-4">
<h4 id="Figure%20out%20why%20this%20produces%20%22args%20out%20of%20bounds%22%20error"><span class="todo TODO">TODO</span> Figure out why this produces "args out of bounds" error</h4>
<div class="outline-text-4" id="text-Figure%20out%20why%20this%20produces%20%22args%20out%20of%20bounds%22%20error">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #41505E;">#  emacsclient -e '(progn (find-file "~/.emacs.d/ian.org") (render-configfile-for-web))'</span>
<span style="color: #41505E;">#  git add README.md ian.html</span>
</pre>
</div>

<p>
I think the command being passed to <code>emacsclient</code> here might be a bit brittle and this approach assumes Emacs is already running, which will be annoying (I'll have to disable this hook) if I'm ever using <code>git</code> on the command line for this repo but given that this repo is.. what it is.. this seems to be working well enough.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-Hostname-based%20tweaks" class="outline-2">
<h2 id="Hostname-based%20tweaks">Hostname-based tweaks</h2>
<div class="outline-text-2" id="text-Hostname-based%20tweaks">
<p>
This is a simple convention that I use for loading machine-specific configuration for the different machines I run Emacs on.
</p>

<ol class="org-ol">
<li>looks for Org files in  <code>/home/$USER/.emacs.d/local/</code> with a name that is the same as the hostname of the machine.</li>
<li>shells out to call <code>hostname</code> to determine the hostname.</li>
<li>tangles that .org file to a .el file and executes it</li>
</ol>

<p>
This allows configuration to diverge to meet needs that are unique to a specific workstation.
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">let</span> <span style="color: #41505E;">;; </span><span style="color: #41505E;">find the hostname and assign it to a variable</span>
     <span style="color: #E27E8D;">(</span><span style="color: #8BD49C;">(</span>hostname <span style="color: #B62D65;">(</span>string-trim-right
                 <span style="color: #33CED8;">(</span>shell-command-to-string <span style="color: #539AFC;">"hostname"</span><span style="color: #33CED8;">)</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span>

   <span style="color: #E27E8D;">(</span><span style="color: #5EC4FF;">progn</span>
     <span style="color: #8BD49C;">(</span>org-babel-tangle-file
      <span style="color: #B62D65;">(</span>concat <span style="color: #539AFC;">"~/.emacs.d/local/"</span> hostname <span style="color: #539AFC;">".org"</span><span style="color: #B62D65;">)</span>
      <span style="color: #B62D65;">(</span>concat hostname <span style="color: #539AFC;">".el"</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>

     <span style="color: #8BD49C;">(</span>load <span style="color: #B62D65;">(</span>concat <span style="color: #539AFC;">"~/.emacs.d/local/"</span> hostname <span style="color: #539AFC;">".el"</span><span style="color: #B62D65;">)</span><span style="color: #8BD49C;">)</span>
     <span style="color: #8BD49C;">(</span><span style="color: #5EC4FF;">require</span> '<span style="color: #E27E8D;">local</span><span style="color: #8BD49C;">)</span><span style="color: #E27E8D;">)</span><span style="color: #5EC4FF;">)</span>
</pre>
</div>

<p>
There must be an Org file in <code>local/</code> named <code>$(hostname).org</code> or init actually breaks. 
This isn't great but for now I've just been making a copy of one of the existing files whenever I start on a new machine.
It may someday feel worth my time to automate this, but so far it hasn't been worth it, and I just create <code>local/"$(hostname).org"</code> as part of initial setup, along with other tasks that I do not automate in this file.
</p>
</div>
</div>

<div id="outline-container-Footer" class="outline-2">
<h2 id="Footer">Footer</h2>
<div class="outline-text-2" id="text-Footer">
</div>
<div id="outline-container-Start%20server" class="outline-3">
<h3 id="Start%20server">Start server</h3>
<div class="outline-text-3" id="text-Start%20server">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span>server-start<span style="color: #5EC4FF;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-End%20of%20file" class="outline-3">
<h3 id="End%20of%20file">End of file</h3>
<div class="outline-text-3" id="text-End%20of%20file">
<p>
Everything after this point in the config file must not be emacs-lisp
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="color: #5EC4FF;">(</span><span style="color: #5EC4FF;">provide</span> '<span style="color: #E27E8D;">~/.emacs.d/ian.el</span><span style="color: #5EC4FF;">)</span>
<span style="color: #41505E;">;;; </span><span style="color: #41505E;">ian.el ends here</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-Styles%20for%20HTML%20export" class="outline-2">
<h2 id="Styles%20for%20HTML%20export">Styles for HTML export</h2>
<div class="outline-text-2" id="text-Styles%20for%20HTML%20export">
<p>
We can spruce up the HTML representation of this file with a little bit of CSS.
</p>

<div class="org-src-container">
<pre class="src src-css"><span style="color: #5EC4FF;">body</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">background-image</span>: <span style="color: #33CED8;">url</span>(<span style="color: #539AFC;">"EmacsIcon.svg"</span>);
    <span style="color: #718CA1;">background-size</span>: <span style="color: #E27E8D;">100</span><span style="color: #EBBF83;">%</span>;
    <span style="color: #718CA1;">background-repeat</span>: <span style="color: #5EC4FF;">no-repeat</span>;
    <span style="color: #718CA1;">background-position</span>: <span style="color: #5EC4FF;">right</span> <span style="color: #5EC4FF;">top</span>;
    <span style="color: #718CA1;">background-size</span>: <span style="color: #E27E8D;">500</span><span style="color: #EBBF83;">px</span> <span style="color: #E27E8D;">500</span><span style="color: #EBBF83;">px</span>;
    <span style="color: #718CA1;">background-color</span>: <span style="color: #539AFC; background-color: #1D252C; font-weight: bold;">#</span><span style="color: #539AFC; font-weight: bold;">F2F2F2</span>;
}

<span style="color: #33CED8; background-color: #1D252C;">#</span><span style="color: #33CED8;">content</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">font-family</span>: <span style="color: #5EC4FF;">Sans</span>;
    <span style="color: #718CA1;">font-size</span>: <span style="color: #E27E8D;">1.2</span><span style="color: #EBBF83;">em</span>;
    <span style="color: #718CA1;">width</span>: <span style="color: #E27E8D;">90</span><span style="color: #EBBF83;">%</span>;
    <span style="color: #718CA1;">max-width</span>: <span style="color: #E27E8D;">950</span><span style="color: #EBBF83;">px</span>;
    <span style="color: #718CA1;">margin-left</span>: <span style="color: #5EC4FF;">auto</span>;
    <span style="color: #718CA1;">margin-right</span>: <span style="color: #5EC4FF;">auto</span>;

    <span style="color: #718CA1;">padding</span>: <span style="color: #E27E8D;">25</span><span style="color: #EBBF83;">px</span>;
    <span style="color: #718CA1;">background-color</span>: <span style="color: #33CED8;">rgba</span>(<span style="color: #E27E8D;">255</span><span style="color: #A0B3C5; background-color: #1D252C;">,</span> <span style="color: #E27E8D;">255</span><span style="color: #A0B3C5; background-color: #1D252C;">,</span> <span style="color: #E27E8D;">255</span><span style="color: #A0B3C5; background-color: #1D252C;">,</span> <span style="color: #E27E8D;">.5</span>);
}

<span style="color: #EBBF83;">.validation</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">display</span>: <span style="color: #5EC4FF;">none</span>;
}

<span style="color: #5EC4FF;">a</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">color</span>: <span style="color: #539AFC; background-color: #1D252C; font-weight: bold;">#</span><span style="color: #539AFC; font-weight: bold;">EF0FFF</span>;
}

<span style="color: #5EC4FF;">a</span><span style="color: #5EC4FF;">:</span><span style="color: #5EC4FF; font-weight: bold;">visited</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">color</span>: <span style="color: #539AFC; background-color: #1D252C; font-weight: bold;">#</span><span style="color: #539AFC; font-weight: bold;">076678</span>;
}

<span style="color: #5EC4FF;">a</span><span style="color: #5EC4FF;">:</span><span style="color: #5EC4FF; font-weight: bold;">hover</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">color</span>: <span style="color: #539AFC; background-color: #1D252C; font-weight: bold;">#</span><span style="color: #539AFC; font-weight: bold;">FFBC42</span>;
}

<span style="color: #5EC4FF;">a</span><span style="color: #5EC4FF;">:</span><span style="color: #5EC4FF; font-weight: bold;">active</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">color</span>: <span style="color: #539AFC; background-color: #1D252C; font-weight: bold;">#</span><span style="color: #539AFC; font-weight: bold;">F74343</span>;
}

<span style="color: #5EC4FF;">div</span><span style="color: #EBBF83;">.org-src-container</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">background-color</span>: <span style="color: #539AFC; background-color: #1D252C; font-weight: bold;">#</span><span style="color: #539AFC; font-weight: bold;">FFFFE0</span>;
    <span style="color: #718CA1;">width</span>: <span style="color: #E27E8D;">100</span><span style="color: #EBBF83;">%</span>;
    <span style="color: #718CA1;">height</span>: <span style="color: #E27E8D;">100</span><span style="color: #EBBF83;">%</span>;
    <span style="color: #718CA1;">overflow</span>: <span style="color: #5EC4FF;">hidden</span>;
}

<span style="color: #5EC4FF;">pre</span><span style="color: #EBBF83;">.src</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">width</span>: <span style="color: #E27E8D;">100</span><span style="color: #EBBF83;">%</span>;
    <span style="color: #718CA1;">height</span>: <span style="color: #E27E8D;">100</span><span style="color: #EBBF83;">%</span>;
    <span style="color: #718CA1;">overflow</span>: <span style="color: #5EC4FF;">scroll</span>;
    <span style="color: #718CA1;">margin-left</span>: <span style="color: #E27E8D;">20</span><span style="color: #EBBF83;">px</span>;

    <span style="color: #718CA1;">-ms-overflow-style</span>: <span style="color: #5EC4FF;">none</span>;  <span style="color: #41505E;">/* Internet Explorer 10+ */</span>
    <span style="color: #718CA1;">scrollbar-width</span>: <span style="color: #5EC4FF;">none</span>;  <span style="color: #41505E;">/* Firefox */</span>
}

<span style="color: #5EC4FF;">pre</span><span style="color: #EBBF83;">.src</span>::<span style="color: #5EC4FF; font-weight: bold;">-webkit-scrollbar</span> {
    <span style="color: #718CA1;">display</span>: <span style="color: #5EC4FF;">none</span>;
}

<span style="color: #5EC4FF;">img</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">max-width</span>: <span style="color: #E27E8D;">100</span><span style="color: #EBBF83;">%</span>;
}

<span style="color: #5EC4FF;">pre</span><span style="color: #EBBF83;">.example</span><span style="color: #5EC4FF;"> </span>{
    <span style="color: #718CA1;">padding</span>: <span style="color: #E27E8D;">10</span><span style="color: #EBBF83;">px</span>;
    <span style="color: #718CA1;">width</span>: <span style="color: #E27E8D;">100</span><span style="color: #EBBF83;">%</span>;
    <span style="color: #718CA1;">overflow-x</span>: <span style="color: #5EC4FF;">scroll</span>;
    <span style="color: #718CA1;">-ms-overflow-style</span>: <span style="color: #5EC4FF;">none</span>;  <span style="color: #41505E;">/* Internet Explorer 10+ */</span>
    <span style="color: #718CA1;">scrollbar-width</span>: <span style="color: #5EC4FF;">none</span>;  <span style="color: #41505E;">/* Firefox */</span>
}

<span style="color: #5EC4FF;">pre</span><span style="color: #EBBF83;">.example</span>::<span style="color: #5EC4FF; font-weight: bold;">-webkit-scrollbar</span> {
    <span style="color: #718CA1;">display</span>: <span style="color: #5EC4FF;">none</span>;
}
</pre>
</div>
</div>
</div>

<div id="outline-container-Launching%20Emacsclient" class="outline-2">
<h2 id="Launching%20Emacsclient">Launching Emacsclient</h2>
<div class="outline-text-2" id="text-Launching%20Emacsclient">
<p>
<a href="https://www.emacswiki.org/emacs/EmacsClient#h5o-18">Nifty shell function for hassle-free starting of emacsclient</a>
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #718CA1;">args</span>=<span style="color: #539AFC;">""</span>
<span style="color: #718CA1;">nw</span>=false
<span style="color: #41505E;"># check if emacsclient is already running</span>
<span style="color: #5EC4FF;">if</span> <span style="color: #5EC4FF; font-weight: bold;">pgrep</span> <span style="color: #E27E8D;">-U</span> <span style="color: #5EC4FF;">$(</span><span style="color: #5EC4FF; font-weight: bold;">id -u</span><span style="color: #5EC4FF;">)</span> emacsclient <span style="color: #5EC4FF;">&gt;</span> /dev/null<span style="color: #5EC4FF;">;</span> <span style="color: #5EC4FF;">then</span> <span style="color: #718CA1;">running</span>=true<span style="color: #5EC4FF;">;</span> <span style="color: #5EC4FF;">fi</span>

<span style="color: #41505E;"># check if the user wants TUI mode</span>
<span style="color: #5EC4FF;">for</span> <span style="color: #E27E8D;">arg</span> <span style="color: #5EC4FF;">in</span> <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">$</span><span style="color: #EBBF83;">@</span><span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">;</span> <span style="color: #5EC4FF;">do</span>
    <span style="color: #5EC4FF;">if</span> [ <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">arg</span><span style="color: #539AFC;">"</span> = <span style="color: #539AFC;">"-nw"</span> ] <span style="color: #5EC4FF;">||</span> [ <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">arg</span><span style="color: #539AFC;">"</span> = <span style="color: #539AFC;">"-t"</span> ] <span style="color: #5EC4FF;">||</span> [ <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">arg</span><span style="color: #539AFC;">"</span> = <span style="color: #539AFC;">"--tty"</span> ]
    <span style="color: #5EC4FF;">then</span>
        <span style="color: #718CA1;">nw</span>=true
    <span style="color: #5EC4FF;">fi</span>
<span style="color: #5EC4FF;">done</span>

<span style="color: #41505E;"># if called without arguments - open a new gui instance</span>
<span style="color: #5EC4FF;">if</span> [ <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">$</span><span style="color: #EBBF83;">#</span><span style="color: #539AFC;">"</span> -eq <span style="color: #539AFC;">"0"</span> ] <span style="color: #5EC4FF;">||</span> [ <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">running</span><span style="color: #539AFC;">"</span> <span style="color: #5EC4FF;">!=</span> true ]<span style="color: #5EC4FF;">;</span> <span style="color: #5EC4FF;">then</span>
    <span style="color: #718CA1;">args</span>=(-c <span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">args</span>)           <span style="color: #41505E;"># open emacsclient in a new window</span>
<span style="color: #5EC4FF;">fi</span>
<span style="color: #5EC4FF;">if</span> [ <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">$</span><span style="color: #EBBF83;">#</span><span style="color: #539AFC;">"</span> -gt <span style="color: #539AFC;">"0"</span> ]<span style="color: #5EC4FF;">;</span> <span style="color: #5EC4FF;">then</span>
    <span style="color: #41505E;"># if 'em -' open standard input (e.g. pipe)</span>
    <span style="color: #5EC4FF;">if</span> [[ <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">1</span><span style="color: #539AFC;">"</span> <span style="color: #5EC4FF;">==</span> <span style="color: #539AFC;">"-"</span> ]]<span style="color: #5EC4FF;">;</span> <span style="color: #5EC4FF;">then</span>
        <span style="color: #718CA1;">TMP</span>=<span style="color: #539AFC;">"</span><span style="color: #539AFC;">$(</span><span style="color: #5EC4FF; font-weight: bold;">mktemp /tmp/emacsstdin-XXX</span><span style="color: #539AFC;">)</span><span style="color: #539AFC;">"</span>
        <span style="color: #5EC4FF; font-weight: bold;">cat</span> <span style="color: #5EC4FF;">&gt;</span><span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">TMP</span>
        <span style="color: #718CA1;">args</span>=(<span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">args</span> --eval <span style="color: #539AFC;">'(let ((b (generate-new-buffer "*stdin*"))) (switch-to-buffer b) (insert-file-contents "'</span><span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">TMP</span><span style="color: #5EC4FF;">}</span><span style="color: #539AFC;">'") (delete-file "'</span><span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">TMP</span><span style="color: #5EC4FF;">}</span><span style="color: #539AFC;">'"))'</span>)
    <span style="color: #5EC4FF;">else</span>
        <span style="color: #718CA1;">args</span>=(<span style="color: #5EC4FF;">$</span><span style="color: #EBBF83;">@</span> <span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">args</span>)
    <span style="color: #5EC4FF;">fi</span>
<span style="color: #5EC4FF;">fi</span>

<span style="color: #41505E;"># emacsclient $args</span>
<span style="color: #5EC4FF;">if</span> <span style="color: #5EC4FF;">$</span><span style="color: #E27E8D;">nw</span><span style="color: #5EC4FF;">;</span> <span style="color: #5EC4FF;">then</span>
    <span style="color: #5EC4FF; font-weight: bold;">emacsclient</span> <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">args</span><span style="color: #A0B3C5; background-color: #1D252C;">[@]</span><span style="color: #5EC4FF;">}</span><span style="color: #539AFC;">"</span>
<span style="color: #5EC4FF;">else</span>
    (<span style="color: #5EC4FF; font-weight: bold;">nohup</span> emacsclient <span style="color: #539AFC;">"</span><span style="color: #5EC4FF;">${</span><span style="color: #E27E8D; background-color: #1D252C;">args</span><span style="color: #A0B3C5; background-color: #1D252C;">[@]</span><span style="color: #5EC4FF;">}</span><span style="color: #539AFC;">"</span> <span style="color: #5EC4FF;">&gt;</span> /dev/null <span style="color: #E27E8D;">2</span>&gt;&amp;1 &amp;) <span style="color: #5EC4FF;">&gt;</span> /dev/null
<span style="color: #5EC4FF;">fi</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-Running%20Emacs%20properly%20from%20the%20GUI" class="outline-2">
<h2 id="Running%20Emacs%20properly%20from%20the%20GUI">Running Emacs properly from the GUI</h2>
<div class="outline-text-2" id="text-Running%20Emacs%20properly%20from%20the%20GUI">
<p>
This <code>.desktop</code> file calls <code>emacs</code> when it's not already running, and <code>emacsclient</code> otherwise.
Slow on first launch, then fast for every new frame thereafter.
</p>

<p>
Tangling this file will install the .desktop file to the correct location (<code>~/.local/share/applications/Emacsclient.desktop</code>).
</p>

<div class="org-src-container">
<pre class="src src-conf">[<span style="color: #EBBF83;">Desktop Entry</span>]
<span style="color: #718CA1;">Name</span>=Emacs
<span style="color: #718CA1;">GenericName</span>=Text Editor
<span style="color: #718CA1;">Comment</span>=Edit text
<span style="color: #718CA1;">MimeType</span>=text/english;text/plain;text/x-makefile;text/x-c++hdr;text/x-c++src;text/x-chdr;text/x-csrc;text/x-java;text/x-moc;text/x-pascal;text/x-tcl;text/x-tex;application/x-shellscript;text/x-c;text/x-c++;
<span style="color: #718CA1;">Exec</span>=emacsclient -c -a <span style="color: #539AFC;">"emacs"</span> %F
<span style="color: #718CA1;">Icon</span>=emacs
<span style="color: #718CA1;">Type</span>=Application
<span style="color: #718CA1;">Terminal</span>=false
<span style="color: #718CA1;">Categories</span>=Development;TextEditor;Utility;
<span style="color: #718CA1;">StartupWMClass</span>=Emacs
</pre>
</div>
</div>

<div id="outline-container-Figure%20out%20how%20to%20run%20Emacs%20as%20a%20daemon%20so%20that%20closing%20the%20last%20frame%20doesn%27t%20exit" class="outline-4">
<h4 id="Figure%20out%20how%20to%20run%20Emacs%20as%20a%20daemon%20so%20that%20closing%20the%20last%20frame%20doesn%27t%20exit"><span class="todo TODO">TODO</span> Figure out how to run Emacs as a daemon so that closing the last frame doesn't exit</h4>
<div class="outline-text-4" id="text-Figure%20out%20how%20to%20run%20Emacs%20as%20a%20daemon%20so%20that%20closing%20the%20last%20frame%20doesn%27t%20exit">
<p>
Launching in headless mode introduces some font problems (fonts don't load when changing themes) that I haven't been able to debug. 
</p>
</div>
</div>
</div>

<div id="outline-container-Compiling%20Emacs%20from%20Source" class="outline-2">
<h2 id="Compiling%20Emacs%20from%20Source">Compiling Emacs from Source</h2>
<div class="outline-text-2" id="text-Compiling%20Emacs%20from%20Source">
<p>
Some notes on the dependencies that I found were needed to build Emacs 28.1 on fresh Ubuntu with the configuration flags that I likhttps://nypost.com/2022/08/05/amazing-space-telescope-image-was-actually-a-slice-of-chorizo/e 
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #5EC4FF; font-weight: bold;">./autogen.sh</span>
<span style="color: #5EC4FF; font-weight: bold;">sudo</span> apt-get install make autoconf libx11-dev libmagickwand-dev libgtk-3-dev libwebkit2gtk-4.0-dev libgccjit-11-dev libxpm-dev libgif-dev libgnutls28-dev libjansson-dev libncurses-dev
<span style="color: #5EC4FF; font-weight: bold;">./configure</span> <span style="color: #E27E8D;">--without-toolkit-scroll-bars</span> <span style="color: #E27E8D;">--with-imagemagick</span> <span style="color: #E27E8D;">--with-x</span> <span style="color: #E27E8D;">--with-xwidgets</span> <span style="color: #E27E8D;">--with-json</span> <span style="color: #5EC4FF; font-weight: bold;">--with-x-toolkit=gtk3</span> <span style="color: #E27E8D;">--with-native-compilation</span> <span style="color: #E27E8D;">--with-mailutils</span>
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
